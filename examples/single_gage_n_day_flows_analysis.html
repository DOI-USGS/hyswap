<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Analysis of N-Day Streamflows for a Single Gage &mdash; hyswap 0.1.dev1+g2f57764 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=6fe04db9"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Visualization of Streamflow Conditions at Streamgages" href="site_conditions_examples.html" />
    <link rel="prev" title="Analysis of Streamflow Conditions and Historical Streamflows at a Single Gage" href="single_gage_analysis.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            hyswap
          </a>
              <div class="version">
                0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../meta/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Simple Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html#example-workflow-notebooks">Example Workflow Notebooks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="single_gage_analysis.html">Analysis of Streamflow Conditions and Historical Streamflows at a Single Gage</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Analysis of N-Day Streamflows for a Single Gage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Download-streamflow-data-from-USGS-NWIS-for-an-example-site">Download streamflow data from USGS NWIS for an example site</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Check-data-and-plot-simple-hydrograph-of-7-day-average-flows">Check data and plot simple hydrograph of 7-day average flows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Look-at-long-term-record-of-n-day-streamflow-as-raster-hydrograph">Look at long-term record of n-day streamflow as raster hydrograph</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Calculate-streamflow-percentiles-for-n-day-flows">Calculate streamflow percentiles for n-day flows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="site_conditions_examples.html">Visualization of Streamflow Conditions at Streamgages</a></li>
<li class="toctree-l2"><a class="reference internal" href="regional_runoff_calculations.html">Using hyswap to estimate runoff for one and multiple HUC08s</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../meta/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meta/calculations.html">Calculations Quick-Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meta/contributing.html">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meta/disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meta/disclaimer.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Module Dependency Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html#api-reference">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hyswap</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Simple Examples</a></li>
      <li class="breadcrumb-item active">Analysis of N-Day Streamflows for a Single Gage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/single_gage_n_day_flows_analysis.nblink.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Analysis-of-N-Day-Streamflows-for-a-Single-Gage">
<h1>Analysis of N-Day Streamflows for a Single Gage<a class="headerlink" href="#Analysis-of-N-Day-Streamflows-for-a-Single-Gage" title="Link to this heading"></a></h1>
<p>Demonstration of use of <a class="reference external" href="https://doi-usgs.github.io/hyswap/">hywsap</a> python package for analyzing different n-day flows for a single streamgage.</p>
<p>This example notebook relies on use of the <a class="reference external" href="https://github.com/DOI-USGS/dataRetrieval">dataretrieval</a> package for downloading streamflow information from USGS NWIS</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dataretrieval</span> <span class="k">as</span> <span class="nn">nwis</span>
<span class="kn">import</span> <span class="nn">hyswap</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span> <span class="c1"># ignore warnings from dataretrieval</span>
</pre></div>
</div>
</div>
<section id="Download-streamflow-data-from-USGS-NWIS-for-an-example-site">
<h2>Download streamflow data from USGS NWIS for an example site<a class="headerlink" href="#Download-streamflow-data-from-USGS-NWIS-for-an-example-site" title="Link to this heading"></a></h2>
<p>For demonstration purposes, use gage 04286000 - WINOOSKI RIVER AT MONTPELIER, VT</p>
<p>Users can identify streamflow gage locations and site ID numbers through the <a class="reference external" href="https://dashboard.waterdata.usgs.gov/app/nwd/en/">USGS National Water Dashboard</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">StaID</span> <span class="o">=</span> <span class="s1">&#39;04286000&#39;</span>
<span class="n">flow_data</span> <span class="o">=</span> <span class="n">nwis</span><span class="o">.</span><span class="n">get_record</span><span class="p">(</span><span class="n">sites</span><span class="o">=</span><span class="n">StaID</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s1">&#39;00060&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;1900-01-01&#39;</span><span class="p">,</span> <span class="n">service</span><span class="o">=</span><span class="s1">&#39;dv&#39;</span><span class="p">)</span>
<span class="n">station_name</span> <span class="o">=</span> <span class="n">nwis</span><span class="o">.</span><span class="n">get_record</span><span class="p">(</span><span class="n">sites</span><span class="o">=</span><span class="n">StaID</span><span class="p">,</span> <span class="n">service</span><span class="o">=</span><span class="s1">&#39;site&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;station_nm&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="s1">&#39;00060_Mean&#39;</span> <span class="ow">in</span> <span class="n">flow_data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="c1"># set preliminary, non-valid observations (-999999) to NaN</span>
    <span class="n">flow_data</span><span class="p">[</span><span class="s1">&#39;00060_Mean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">flow_data</span><span class="p">[</span><span class="s1">&#39;00060_Mean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">-</span><span class="mi">999999</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

    <span class="c1"># create a filtered version of data of only USGS approved data (quality-assured data that may be published and used in statistical analsysis)</span>
    <span class="n">approved_flow_data</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">filter_approved_data</span><span class="p">(</span><span class="n">flow_data</span><span class="p">,</span> <span class="s1">&#39;00060_Mean_cd&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No standard discharge data column found for site &#39;</span> <span class="o">+</span> <span class="n">StaID</span> <span class="o">+</span> <span class="s1">&#39;, suggest using a different site&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># summary statistics for the approved data (quality-assured data that may be published and used in statistical analsysis)</span>
<span class="n">summary_stats</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">calculate_summary_statistics</span><span class="p">(</span><span class="n">approved_flow_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#| tbl-cap: Example table of summary statistics</span>
<span class="n">summary_stats</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Summary Statistics</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Site number</th>
      <td>04286000</td>
    </tr>
    <tr>
      <th>Begin date</th>
      <td>1914-07-01</td>
    </tr>
    <tr>
      <th>End date</th>
      <td>2023-12-05</td>
    </tr>
    <tr>
      <th>Count</th>
      <td>38197</td>
    </tr>
    <tr>
      <th>Minimum</th>
      <td>17.0</td>
    </tr>
    <tr>
      <th>Mean</th>
      <td>623.35</td>
    </tr>
    <tr>
      <th>Median</th>
      <td>354.0</td>
    </tr>
    <tr>
      <th>Maximum</th>
      <td>17900.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Check-data-and-plot-simple-hydrograph-of-7-day-average-flows">
<h2>Check data and plot simple hydrograph of 7-day average flows<a class="headerlink" href="#Check-data-and-plot-simple-hydrograph-of-7-day-average-flows" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#| fig-cap: Sample HySwap hydrograph plot for 7-Day Average Streamflow</span>
<span class="c1"># calculate n-Day average streamflow</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">flow_data_nday</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">rolling_average</span><span class="p">(</span><span class="n">flow_data</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="n">plot_start</span> <span class="o">=</span> <span class="s2">&quot;2021-10-01&quot;</span>
<span class="n">plot_end</span> <span class="o">=</span> <span class="s2">&quot;2023-09-30&quot;</span>
<span class="c1"># make plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">plot_hydrograph</span><span class="p">(</span><span class="n">flow_data_nday</span><span class="p">,</span>
                       <span class="n">data_col</span> <span class="o">=</span> <span class="s2">&quot;00060_Mean&quot;</span><span class="p">,</span>
                       <span class="n">start_date</span><span class="o">=</span><span class="n">plot_start</span><span class="p">,</span>
                       <span class="n">end_date</span><span class="o">=</span><span class="n">plot_end</span><span class="p">,</span>
                       <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1">-Day Average Streamflow Hydrograph for </span><span class="si">{</span><span class="n">StaID</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">station_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
                       <span class="n">ylab</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">-Day Average Streamflow (cfs)&quot;</span><span class="p">,</span>
                       <span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_single_gage_n_day_flows_analysis_9_0.png" src="../_images/examples_single_gage_n_day_flows_analysis_9_0.png" />
</div>
</div>
</section>
<section id="Look-at-long-term-record-of-n-day-streamflow-as-raster-hydrograph">
<h2>Look at long-term record of n-day streamflow as raster hydrograph<a class="headerlink" href="#Look-at-long-term-record-of-n-day-streamflow-as-raster-hydrograph" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># try a raster hydrograph to see historical n-day flows</span>
<span class="c1"># format the data from the last 50 years of records (1972-2023)</span>
<span class="n">df_formatted</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">rasterhydrograph</span><span class="o">.</span><span class="n">format_data</span><span class="p">(</span><span class="n">flow_data</span><span class="p">,</span>
                                                   <span class="s1">&#39;00060_Mean&#39;</span><span class="p">,</span>
                                                   <span class="n">year_type</span><span class="o">=</span><span class="s2">&quot;calendar&quot;</span><span class="p">,</span>
                                                   <span class="n">begin_year</span><span class="o">=</span><span class="mi">1973</span><span class="p">,</span>
                                                   <span class="n">end_year</span><span class="o">=</span><span class="mi">2023</span><span class="p">,</span>
                                                   <span class="n">data_type</span> <span class="o">=</span> <span class="s2">&quot;7-day&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#| fig-cap: Sample raster hydrograph showing past 50 years of 7-day average streamflow</span>

<span class="c1"># make plot</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">12</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">plot_raster_hydrograph</span><span class="p">(</span>
    <span class="n">df_formatted</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;7-Day Average Raster Hydrograph for </span><span class="si">{</span><span class="n">StaID</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">station_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">cbarlab</span><span class="o">=</span><span class="s1">&#39;7-Day Average Streamflow, cubic feet per second&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_single_gage_n_day_flows_analysis_12_0.png" src="../_images/examples_single_gage_n_day_flows_analysis_12_0.png" />
</div>
</div>
</section>
<section id="Calculate-streamflow-percentiles-for-n-day-flows">
<h2>Calculate streamflow percentiles for n-day flows<a class="headerlink" href="#Calculate-streamflow-percentiles-for-n-day-flows" title="Link to this heading"></a></h2>
<p>This example focuses on how the year 2023 compares to other years on record for this site. First, we will view how daily streamflow in 2023 compares to other years, and then compare 7-day and 28-day rolling means.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get year/doy information</span>
<span class="n">df_indexed</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">define_year_doy_columns</span><span class="p">(</span><span class="n">flow_data</span><span class="p">,</span>
                                               <span class="n">year_type</span><span class="o">=</span><span class="s1">&#39;water&#39;</span><span class="p">,</span>
                                               <span class="n">clip_leap_day</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">year_to_plot</span> <span class="o">=</span> <span class="mi">2023</span>
<span class="c1"># filter down to data from year to plot</span>
<span class="n">df_year</span> <span class="o">=</span> <span class="n">df_indexed</span><span class="p">[</span><span class="n">df_indexed</span><span class="p">[</span><span class="s1">&#39;index_year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">year_to_plot</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="c1"># calculate variable percentile thresholds (using only approved data)</span>
<span class="n">percentiles_by_day</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_variable_percentile_thresholds_by_day</span><span class="p">(</span>
    <span class="n">approved_flow_data</span><span class="p">,</span> <span class="s2">&quot;00060_Mean&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#| fig-cap: Example streamflow duration hydrograph with daily streamflow for the 2023 Water Year</span>
<span class="c1"># plot daily percentiles</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">plot_duration_hydrograph</span><span class="p">(</span>
    <span class="n">percentiles_by_day</span><span class="p">,</span>
    <span class="n">df_year</span><span class="p">,</span>
    <span class="s2">&quot;00060_Mean&quot;</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
    <span class="n">data_label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Water Year </span><span class="si">{</span><span class="n">year_to_plot</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Streamflow Duration Hydrograph for </span><span class="si">{</span><span class="n">StaID</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">station_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">xlab</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ylab</span><span class="o">=</span><span class="s2">&quot;Daily Streamflow (cfs)&quot;</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_single_gage_n_day_flows_analysis_15_0.png" src="../_images/examples_single_gage_n_day_flows_analysis_15_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#| fig-cap: Example streamflow duration hydrograph with 7-day average streamflow for the 2023 Water Year</span>
<span class="n">percentiles_by_nday</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_variable_percentile_thresholds_by_day</span><span class="p">(</span>
    <span class="n">approved_flow_data</span><span class="p">,</span> <span class="s2">&quot;00060_Mean&quot;</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;7-day&#39;</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">7</span>
<span class="c1"># plot 7-day avg percentiles</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">plot_duration_hydrograph</span><span class="p">(</span>
    <span class="n">percentiles_by_nday</span><span class="p">,</span>
    <span class="n">hyswap</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">rolling_average</span><span class="p">(</span><span class="n">df_year</span><span class="p">,</span> <span class="s2">&quot;00060_Mean&quot;</span><span class="p">,</span> <span class="n">n</span><span class="p">),</span>
    <span class="s2">&quot;00060_Mean&quot;</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
    <span class="n">data_label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Water Year </span><span class="si">{</span><span class="n">year_to_plot</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">-Day Avg. Streamflow Duration Hydrograph for </span><span class="si">{</span><span class="n">StaID</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">station_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">xlab</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ylab</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">-Day Avg. Streamflow (cfs)&quot;</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_single_gage_n_day_flows_analysis_16_0.png" src="../_images/examples_single_gage_n_day_flows_analysis_16_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#| fig-cap: Example streamflow duration hydrograph with 28-day average streamflow for the 2023 Water Year</span>
<span class="n">percentiles_by_nday</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_variable_percentile_thresholds_by_day</span><span class="p">(</span>
    <span class="n">approved_flow_data</span><span class="p">,</span> <span class="s2">&quot;00060_Mean&quot;</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;28-day&#39;</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">28</span>
<span class="c1"># plot 28-day average percentiles</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">plot_duration_hydrograph</span><span class="p">(</span>
    <span class="n">percentiles_by_nday</span><span class="p">,</span>
    <span class="n">hyswap</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">rolling_average</span><span class="p">(</span><span class="n">df_year</span><span class="p">,</span> <span class="s2">&quot;00060_Mean&quot;</span><span class="p">,</span> <span class="n">n</span><span class="p">),</span>
    <span class="s2">&quot;00060_Mean&quot;</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
    <span class="n">data_label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Water Year </span><span class="si">{</span><span class="n">year_to_plot</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">-Day Avg. Streamflow Duration Hydrograph for </span><span class="si">{</span><span class="n">StaID</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">station_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">xlab</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ylab</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">-Day Avg. Streamflow (cfs)&quot;</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_single_gage_n_day_flows_analysis_17_0.png" src="../_images/examples_single_gage_n_day_flows_analysis_17_0.png" />
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="single_gage_analysis.html" class="btn btn-neutral float-left" title="Analysis of Streamflow Conditions and Historical Streamflows at a Single Gage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="site_conditions_examples.html" class="btn btn-neutral float-right" title="Visualization of Streamflow Conditions at Streamgages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>