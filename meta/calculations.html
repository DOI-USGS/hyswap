<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculations Quick-Reference &mdash; hyswap 0.1.dev1+gfc756e4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=c9778fe8"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing Guidelines" href="contributing.html" />
    <link rel="prev" title="Glossary" href="glossary.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            hyswap
          </a>
              <div class="version">
                0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Simple Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html#example-workflow-notebooks">Example Workflow Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Calculations Quick-Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#assumptions-and-caveats">Assumptions and Caveats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#streamflow-percentiles">Streamflow Percentiles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exceedance-probabilities-and-flow-duration-curves">Exceedance Probabilities and Flow-Duration Curves</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flow-categorization">Flow Categorization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#area-based-runoff">Area-Based Runoff</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#workflow-for-associating-streamgages-with-huc8s-for-area-based-runoff-calculations">Workflow for Associating Streamgages with HUC8s for Area-Based Runoff Calculations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow-for-estimating-area-based-runoff">Workflow for Estimating Area-Based Runoff</a></li>
<li class="toctree-l3"><a class="reference internal" href="#streamflow-record-similarity">Streamflow Record Similarity</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="disclaimer.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Module Dependency Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html#api-reference">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hyswap</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Calculations Quick-Reference</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/meta/calculations.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="calculations-quick-reference">
<h1>Calculations Quick-Reference<a class="headerlink" href="#calculations-quick-reference" title="Link to this heading"></a></h1>
<p>A quick-reference guide to the common types of calculations performed within the <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> package is provided below. See the <a class="reference internal" href="glossary.html"><span class="doc">Glossary</span></a> section for definitions of specific terms. Also, refer to the <a class="reference internal" href="../reference/index.html"><span class="doc">API Reference</span></a> section for more detailed documentation on specific functions within <code class="docutils literal notranslate"><span class="pre">hyswap</span></code>.</p>
<section id="assumptions-and-caveats">
<h2>Assumptions and Caveats<a class="headerlink" href="#assumptions-and-caveats" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> package functions assume that provided streamflow data has been quality controlled. No checks on incorrect, missing, or negative values are performed. Users should perform any necessary QA/QC checks on the data prior to using <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> functions. Additionally, <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> does not detect artifacts or shifts in streamflow data that potentially violate statistical methods, such as:
- negative flows associated with tidal-influenced locations or other phenomena
- regulated flows or transitions from regulated to unregulated flows (or vice versa)
- major watershed changes</p>
<p>For users who are applying <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> functions directly to data retrieved from USGS NWIS, please be aware that non-standard parameter names occasionally occur. Reasons for this could be to indicate that a site has an upstream and downstream sensor, a sensor was moved in the water column, or a site was measured multiple times. This package treats sites with non-standard parameter names as outliers and skips those sites. Users should take appropriate steps to check for non-standard parameter names and determine appropriate data handling steps based on their needs.</p>
</section>
<section id="streamflow-percentiles">
<h2>Streamflow Percentiles<a class="headerlink" href="#streamflow-percentiles" title="Link to this heading"></a></h2>
<p>Streamflow percentiles are a core calculation of <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> that are used to determine streamflow conditions (e.g., normal, high-flow, low-flow, drought, flood). Percentiles can be computed from daily streamflow (discharge), <em>n</em>-day average streamflow, or runoff. Multiple types of percentiles are used in hydrologic analysis and vary in what subset of observations are used in calculating a given set of percentiles. Percentiles are closely related to exceedance probabilities used to construct flow duration curves (see below). The <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> package provides support for the following types of streamflow percentiles:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Percentile Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Variable (Day of Year)</p></td>
<td><p>Computed using flow observations for that
day from all years of record resulting
in percentile classes/thresholds that
change seasonally and correspond to a
specific day of year. Variable percentiles
are useful for characterizing flow
conditions relative to the typical flow
on a given day of the year. The variable
(day of year) percentile is the standard
percentile that is displayed in USGS
water data services.</p></td>
</tr>
<tr class="row-odd"><td><p>Fixed (All days)</p></td>
<td><p>Computed using all flow observations in
the period of record. Records from all
days of the year are combined resulting
in percentile classes/thresholds that do
not change seasonally. Fixed percentiles
are useful for characterizing flow
conditions relative to non-moving
phenomena such as flood stages or dam
intakes.</p></td>
</tr>
<tr class="row-even"><td><p>Variable Moving Window
(Day of Year)</p></td>
<td><p>Computed using flow observations for that
day plus or minus <em>n</em> number of days
(e.g., 7, 14, or 30) from all years of
record resulting in percentile
classes/thresholds that change seasonally
and correspond to a specific day of year.
Variable moving window percentiles reduce
the fluctuation in percentile classes from
day-to-day, especially for sites with
short observation records. Variable
moving window is useful for
characterizing flow conditions relative to
typical flow expected on a given day of
the year.</p></td>
</tr>
</tbody>
</table>
<p>By default, <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> computes streamflow percentiles using the unbiased Weibull plotting position formula, <span class="math notranslate nohighlight">\(i/(n+1)\)</span>, where <em>i</em> is the rank of an observation and <em>n</em> is the sample size (Weibull, 1939). The Weibull formula has been the standard approach used by hydrologists for generating flow-duration and flood-frequency curves <a class="reference external" href="https://doi.org/10.3133/tm4A3">(Helsel and others, 2020)</a>. Weibull plotting position does not set values to either 0 or 100, recognizing the existence of a non-zero probablity of exceeding the maximum or minimum observed value. For further discussion of plotting positions refer to <a class="reference external" href="https://doi.org/10.3133/tm4A3">(Helsel and others, 2020)</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">hyswap</span></code> uses the <code class="docutils literal notranslate"><span class="pre">numpy.percentile()</span></code> implementation of the Weibull method (Type 6) for calculating percentiles. Additional methods of computing percentiles that exist in the <code class="docutils literal notranslate"><span class="pre">numpy.percentile()</span></code> function can be used in <code class="docutils literal notranslate"><span class="pre">hyswap</span></code>. Users can refer to the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.percentile.html">numpy function documentation</a> for additional details.</p>
<p>Other default settings for percentile calculations are that NA values are dropped, a minimum of 10 years of record length is available for a given day of year, and percentile levels of 0, 5, 10, 25, 50, 75, 90, 95, 100 are calculated.</p>
<p><code class="docutils literal notranslate"><span class="pre">hyswap</span></code> uses the <code class="docutils literal notranslate"><span class="pre">numpy.percentile()</span></code> implementation of the Weibull method (Type 6) for calculating percentiles</p>
<section id="exceedance-probabilities-and-flow-duration-curves">
<h3>Exceedance Probabilities and Flow-Duration Curves<a class="headerlink" href="#exceedance-probabilities-and-flow-duration-curves" title="Link to this heading"></a></h3>
<p>In some hydrological studies, particularly those related to floods, a variation of the percentile known as the “percent exceedance” is used. It can be obtained by subtracting the percentile scale value from 100 percent.  For example, a discharge at the 75th percentile is the same as a discharge at the 25th percent exceedance (100-75=25). By default, <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> computes streamflow exceedance probabilities using the unbiased Weibull plotting position formula (Weibull, 1939). Additional methods of computing exceedance probabilities can be used in <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> including linear (R Type 4), Hazen (R Type 5), Gumbel (R Type 7), Reiss (R Type 8), and Blom (R Type 9). Flow-duration curves computed within <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> are cumulative frequency curves where values indicate either (1) the percent of values equal to or less than each discharge value (percentile) OR (2) the percent of values equal to or greater than each discharge value (percent exceedance). The Weibull method of computing exceedance probabilities is used by default for computing flow-duration curves.</p>
</section>
<section id="flow-categorization">
<h3>Flow Categorization<a class="headerlink" href="#flow-categorization" title="Link to this heading"></a></h3>
<p>Streamflow observations at a streamgage can be assigned a flow condition category using <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> by use of the <cite>hyswap</cite> <a class="reference internal" href="../reference/index.html#hyswap.utils.categorize_flows" title="hyswap.utils.categorize_flows"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hyswap.utils.categorize_flows</span></code></a> function. Streamflow percentiles or interpolated estimated streamflow percentiles are compared to a categorization schema. Multiple categorization schema are available in <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> with the default being flow categories similar to those displayed on the USGS National Water Dashboard. Categorization schema are applicable to both variable and fixed percentile types. Available schema are described below:</p>
<ul>
<li><p>“NWD” – Categorization schema similar to the USGS National Water Dashboard, <em>default</em>
Categorizes streamflow across all range of possible streamflow magnitudes. Typically used with variable percentiles</p>
<a class="reference internal image-reference" href="../_images/nwd.png"><img alt="Categorization schema of percentile ranges, labels, and color palette similar to the National Water Dashboard." src="../_images/nwd.png" style="width: 800px;" /></a>
</li>
<li><p>“WaterWatch” – Categorization schema similar to the USGS WaterWatch website
Categorizes streamflow across all range of possible streamflow magnitudes. Typically used with variable percentiles</p>
<a class="reference internal image-reference" href="../_images/waterwatch.png"><img alt="Categorization schema of percentile ranges, labels, and color palette similar to USGS WaterWatch." src="../_images/waterwatch.png" style="width: 800px;" /></a>
</li>
<li><p>“NIDIS_Drought” – Categorization schema similar to the NIDIS U.S. Drought Monitor
Categorizes streamflow across only low-flow conditions.</p>
<a class="reference internal image-reference" href="../_images/nidis_drought.png"><img alt="Categorization schema of percentile ranges, labels, and color palette similar to NIDIS U.S. Drought Monitor." src="../_images/nidis_drought.png" style="width: 800px;" /></a>
</li>
<li><p>“WaterWatch_Drought” – Categorization schema similar to the USGS WaterWatch Drought Conditions
Categorizes streamflow across only low-flow conditions. Typically used with variable percentiles</p>
<a class="reference internal image-reference" href="../_images/waterwatch_drought.png"><img alt="Categorization schema of percentile ranges, labels, and color palette similar to USGS WaterWatch Drought Conditions." src="../_images/waterwatch_drought.png" style="width: 800px;" /></a>
</li>
<li><p>“WaterWatch_Flood” – Categorization schema similar to the USGS WaterWatch Flood Conditions
Categorizes streamflow across only high-flow conditions. Typically used with fixed percentiles</p>
<a class="reference internal image-reference" href="../_images/waterwatch_flood.png"><img alt="Categorization schema of percentile ranges, labels, and color palette similar to USGS WaterWatch Flood Conditions." src="../_images/waterwatch_flood.png" style="width: 800px;" /></a>
</li>
<li><p>“WaterWatch_BrownBlue” – Categorization schema similar to the USGS WaterWatch categories but with an alternative color palette
Categorizes streamflow across all range of possible streamflow magnitudes. Typically used with variable percentiles</p>
<a class="reference internal image-reference" href="../_images/waterwatch_brownblue.png"><img alt="Categorization schema of percentile ranges and labels similar to USGS WaterWatch but with a brown-blue color palette." src="../_images/waterwatch_brownblue.png" style="width: 800px;" /></a>
</li>
</ul>
</section>
</section>
<section id="area-based-runoff">
<h2>Area-Based Runoff<a class="headerlink" href="#area-based-runoff" title="Link to this heading"></a></h2>
<p>In addition to information on a per-streamgage basis, <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> can generate water information at the regional scale through computation of area-based runoff calculations. Estimates of runoff for a given area (e.g., state or HUC2 region) are generated by combining streamflow data collected at USGS streamgages at the sub-basin HUC8 (8-digit hydrologic unit code or hydrologic cataloging unit) using a weighted average approach. Hydrologic cataloging units and associated 8-digit accounting numbers (HUC8s) are a widely used geographic framework for the conterminous United States (CONUS). Each unit defines a geographic area representing part or all of a surface drainage basin or a combination of drainage basins. Cataloging units subdivide larger accounting units (HUC6s), subregions (HUC4s) and regions (HUC2s) into smaller areas designated by the U.S. Water Resources Council and the USGS’s National Water Data Network. Cataloging units range in size from 24 to 22,808 km<sup>2</sup> with a median value of 3,133 km<sup>2</sup> <a class="reference external" href="https://doi.org/10.3133/tm11A3">(Jones and others, 2022)</a>.</p>
<p>The calculation of area-based runoff in <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> involves the steps described below and illustrated in an example in Figure 1:</p>
<ol class="arabic simple">
<li><p>Compute runoff values (flow per unit area) for each streamgage basin by dividing the average daily flow by the delineated drainage area. Drainage areas are an input to the <code class="docutils literal notranslate"><span class="pre">streamflow_to_runoff</span></code> function in <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> to obtain runoff in units of millimeters per unit time (e.g. day, month, year).</p></li>
<li><p>Calculate runoff for each HUC8 unit that is in the area of interest (e.g., state or HUC2 region) using the runoff from multiple streamgages along with associated overlap between streamgage basins and the HUC8. This process is discussed in detail under the ‘Workflow for Estimating Area-Based Runoff’ section. The dataframe containing the proportion of HUC8 area in each streamgage basin and the proportion of streamgage basin area in each HUC8 for all HUC8s is an input to the <code class="docutils literal notranslate"><span class="pre">calculate_geometric_runoff</span></code> functions in <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> functions. This intersection table must be created from spatial data layers describing HUC and streamgage drainage area boundaries (more info below).</p></li>
<li><p>Aggregate runoff from the individual HUC8s that are within the area of interest (e.g., state or HUC2 region).</p></li>
</ol>
<section id="workflow-for-associating-streamgages-with-huc8s-for-area-based-runoff-calculations">
<h3>Workflow for Associating Streamgages with HUC8s for Area-Based Runoff Calculations<a class="headerlink" href="#workflow-for-associating-streamgages-with-huc8s-for-area-based-runoff-calculations" title="Link to this heading"></a></h3>
<p>Spatial datasets describing the respective drainage basin boundaries of the streamgages and the boundaries of hydrologic cataloging units must be obtained that cover all areas of interest (e.g. CONUS). Geospatial boundaries of streamgages may be based on delineated gage drainage areas calculated using NHDPlus Version 1 data <a class="reference external" href="https://water.usgs.gov/lookup/getspatial?streamgagebasins">(U.S. Geological Survey, 2011)</a> or determined via other watershed delineation approaches. HUC8 boundaries are contained within the <a class="reference external" href="https://www.usgs.gov/national-hydrography/watershed-boundary-dataset">USGS Watershed Boundary Dataset (WBD)</a>.</p>
<p>Each geospatial streamgage drainage basin boundary is overlain on a geospatial dataset of HUC8s (the polygons outlined in thick gray-brown lines in Figure 1 example) to determine the area of intersection within the two datasets. For each overlapping area of HUC8s and streamgage drainage basin boundaries, the fraction of the basin in the HUC8 and the fraction of the HUC8 in the basin are calculated. These fractions are then multiplied by each other to compute a weighting factor for each basin in the runoff calculation.</p>
<p>You can find an example intersection dataset between CONUS HUC8s and streamgage basins in the <a class="reference external" href="https://code.usgs.gov/water/computational-tools/surface-water-work/hyswap-example-notebooks">hyswap-example-notebooks repository</a>. This intersection dataset was created using the <a class="reference external" href="https://code.usgs.gov/water/computational-tools/surface-water-work/surface-water-geospatial-data-assembly">surface water geospatial data assembly repository</a>.</p>
</section>
<section id="workflow-for-estimating-area-based-runoff">
<h3>Workflow for Estimating Area-Based Runoff<a class="headerlink" href="#workflow-for-estimating-area-based-runoff" title="Link to this heading"></a></h3>
<p>After obtaining a table of intersecting HUC8s and streamgage basins, the next step of the analysis is to determine which streamgage basins should be used to calculate a weighted average of runoff values for each HUC8 over each unit of time (e.g. days, months, years). The weight for each streamgage basin-HUC intersection is the product of the proportion of the HUC8’s area in the streamgage basin area and the proportion of the streamgage basin’s area in the HUC8 area. <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> offers two options for estimating runoff using streamgage basins that overlap the HUC8s:</p>
<ol class="arabic simple">
<li><p>For each unit of time with runoff data at one or more streamgages whose basins intersect the HUC8, obtain a weighted average of all runoff values.</p></li>
<li><p>If a HUC8 and a streamgage basin have near perfect overlap (e.g. the proportion of the HUC8’s area in the basin is greater than 0.9 and the proportion of the basin’s area in the HUC8 is greater than 0.9), simply use the runoff values from that streamgage basin. If perfect overlap does not exist, use a weighted average of runoff values from:</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>all streamgage basins <em>contained</em> by the HUC8, and</p></li>
<li><p>the smallest streamgage basin that <em>contains</em> the HUC8</p></li>
</ol>
</div></blockquote>
<p>Note that in cases where there is near perfect overlap for multiple streamgage basins and a HUC8, the streamgage basin-HUC8 intersection with the <em>highest</em> weight is used to estimate runoff. This is the same method used to determine the smallest streamgage basin that contains the HUC8: among all the streamgage basins that contain the HUC8 (in other words, the proportion of the HUC8’s area in the streamgage basins is roughly 1), find the HUC8-streamgage basin intersection with the highest weight (which means the proportion of the streamgage basin’s area in the HUC8 is the largest). See Figure 1 for an example of this workflow. Note that in Figure 1, ‘Fraction#’ is analogous to ‘proportion of shape X’s area in shape Y’.</p>
<a class="reference internal image-reference" href="../_images/huc8_runoff_example.gif"><img alt="Map and table that provide an example of the computation of area-based runoff for a given HUC." src="../_images/huc8_runoff_example.gif" style="width: 600px;" /></a>
<p>Figure 1. Example computation for computation of runoff for a selected HUC unit. (The drainage area of basin A is shaded light gray and the drainage area of basin B is shaded pink. Note that drainage basin B is nested within drainage basin A). Figure from <a class="reference external" href="https://doi.org/10.1111/j.1752-1688.2011.00578.x">(Brakebill and others, 2011)</a> In this figure, ‘Fraction#’ is analogous to ‘proportion of shape X’s area in shape Y’.</p>
<p><strong>Note:</strong> Description of methods for area-based runoff computation is adapted from <a class="reference external" href="https://pubs.usgs.gov/publication/fs20083031">USGS WaterWatch</a>.</p>
</section>
<section id="streamflow-record-similarity">
<h3>Streamflow Record Similarity<a class="headerlink" href="#streamflow-record-similarity" title="Link to this heading"></a></h3>
<p>Identifying streamgages that are most similar or correlated is a common task when identifying potential streamgages to be used for estimating missing records or other hydrological modeling tasks. <code class="docutils literal notranslate"><span class="pre">hyswap</span></code> can compute the similarity of streamflow records using different similarity measures and plot these as a matrix. The available measures are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Similarity Measure</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Pearson’s <em>r</em> correlation</p></td>
<td><p>Commonly used measure of correlation that
measures the linear association between
two datasets <a class="reference external" href="https://doi.org/10.3133/tm4A3">(Helsel and others, 2020)</a>.
Calculation of Pearson’s <em>r</em> correlation
on daily streamflow records or
log-transformed daily streamflow records
is often used to identify potential
index or reference streamgages
<a class="reference external" href="https://doi.org/10.1002/wrcr.20070">(Yuan, 2013)</a>.</p></td>
</tr>
<tr class="row-odd"><td><p>Wasserstein Distance</p></td>
<td><p>A metric that measures the distance
between two distributions and in a
hydrological context measures the “effort”
required to rearrange one distribution of
water into the other. The Wasserstein
distance can be used to compare how
similar two hydrographs are to each other
<a class="reference external" href="https://doi.org/10.5194/hess-27-991-2023">(Magyar &amp; Sambridge, 2023)</a>.</p></td>
</tr>
<tr class="row-even"><td><p>Energy Distance</p></td>
<td><p>A metric that measures the distance
between two distributions. The energy
is experimental in hydrology but has been
used to identify similarity between time
series such electricity demand
<a class="reference external" href="https://doi.org/10.1098/rsta.2019.0431">(Ziel, 2021)</a>.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading"></a></h2>
<p>Brakebill, J.W., D.M. Wolock, and S.E. Terziotti, 2011. Digital Hydrologic Networks Supporting Applications Related to Spatially Referenced Regression Modeling. Journal of the American Water Resources Association (JAWRA) 47(5):916-932.</p>
<p>Helsel, D.R., Hirsch, R.M., Ryberg, K.R., Archfield, S.A., and Gilroy, E.J., 2020. Statistical methods in water resources: U.S. Geological Survey Techniques and Methods, book 4, chap. A3, 458 p., <a class="reference external" href="https://doi.org/10.3133/tm4a3">https://doi.org/10.3133/tm4a3</a>. [Supersedes USGS Techniques of Water-Resources Investigations, book 4, chap. A3, version 1.1.]</p>
<p>Jones, K.A., Niknami, L.S., Buto, S.G., and Decker, D., 2022. Federal standards and procedures for the national Watershed Boundary Dataset (WBD) (5 ed.): U.S. Geological Survey Techniques and Methods 11-A3, 54 p., <a class="reference external" href="https://pubs.usgs.gov/tm/11/a3/">https://pubs.usgs.gov/tm/11/a3/</a>.</p>
<p>Magyar, J.C. &amp; Sambridge, M., 2023. Hydrological objective functions and ensemble averaging with the Wasserstein distance, Hydrol. Earth Syst. Sci., 27, 991–1010, <a class="reference external" href="https://doi.org/10.5194/hess-27-991-2023">https://doi.org/10.5194/hess-27-991-2023</a>.</p>
<p>U.S. Geological Survey, 2011. USGS Streamgage NHDPlus Version 1 Basins 2011. Data Series [DS-719] <a class="reference external" href="https://water.usgs.gov/lookup/getspatial?streamgagebasins">water.usgs.gov/lookup/getspatial?streamgagebasins</a></p>
<p>U.S. Geological Survey, 2023. USGS water data for the Nation: U.S. Geological Survey National Water Information System database, accessed at <a class="reference external" href="https://dx.doi.org/10.5066/F7P55KJN">https://dx.doi.org/10.5066/F7P55KJN</a>.</p>
<p>Weibull, W., 1939. A statistical theory of strength of materials, Ingeniors Vetenskaps Akademien Handlinga, no. 153, 9. 17</p>
<p>Yuan, L.L., 2013. Using correlation of daily flows to identify index gauges for ungauged streams, Water Resour. Res., 49, <a class="reference external" href="https://doi.org/10.1002/wrcr.20070">https://doi.org/10.1002/wrcr.20070</a>.</p>
<p>Ziel, F., 2021. The energy distance for ensemble and scenario reduction, Phil, Trans. R. Soc. A. 379: 20190431, <a class="reference external" href="https://doi.org/10.1098/rsta.2019.0431">https://doi.org/10.1098/rsta.2019.0431</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="glossary.html" class="btn btn-neutral float-left" title="Glossary" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="contributing.html" class="btn btn-neutral float-right" title="Contributing Guidelines" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>