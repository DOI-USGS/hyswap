
<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Module Dependency Graph &#8212; hyswap 0.1.dev1+gd165042 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
    <link rel="stylesheet" type="text/css" href="../_static/bizstyle.css?v=98f81e42" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    
    <script src="../_static/documentation_options.js?v=30c2048e"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Disclaimer" href="../meta/disclaimer.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../meta/disclaimer.html" title="Disclaimer"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">hyswap 0.1.dev1+gd165042 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Module Dependency Graph</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-dependency-graph">
<h1>Module Dependency Graph<a class="headerlink" href="#module-dependency-graph" title="Link to this heading">¶</a></h1>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/hyswap.png"><img alt="hyswap module dependency graph" src="../_images/hyswap.png" style="width: 903.6px; height: 894.6px;" />
</a>
</figure>
<p>Auto-generated module dependency graph for <cite>hyswap</cite> as generated by <cite>pydeps</cite>.</p>
</section>
<section id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Link to this heading">¶</a></h1>
<section id="module-hyswap.utils">
<span id="utility-functions"></span><h2>Utility Functions<a class="headerlink" href="#module-hyswap.utils" title="Link to this heading">¶</a></h2>
<p>Utility functions for hyswap.</p>
<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.calculate_metadata">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">calculate_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#calculate_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.calculate_metadata" title="Link to this definition">¶</a></dt>
<dd><p>Calculate metadata for a series of data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pandas.Series</em>) – The data to calculate the metadata for. Expected to have a datetime
index.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The calculated metadata which includes the number of years of data,
the number of data points, any gaps in the data, and the start and end
dates of the data, the number of 0 values, the number of NA values,
as well as the number of low (typically low flow &lt;= 0.01) values.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.calculate_summary_statistics">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">calculate_summary_statistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'00060_Mean'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#calculate_summary_statistics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.calculate_summary_statistics" title="Link to this definition">¶</a></dt>
<dd><p>Calculate summary statistics for a site.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame containing daily values for the site. Expected to be from
<cite>dataretrieval.nwis.get_dv()</cite>, or similar.</p></li>
<li><p><strong>data_col</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the column in the dv_df DataFrame that contains the data of
interest. Default is “00060_Mean” which is the mean daily discharge
column.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>summary_df</strong> – DataFrame containing summary statistics for the site.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Get some NWIS data and apply the function to get the summary statistics.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;03586500&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">startDT</span><span class="o">=</span><span class="s2">&quot;2010-01-01&quot;</span><span class="p">,</span> <span class="n">endDT</span><span class="o">=</span><span class="s2">&quot;2010-12-31&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">calculate_summary_statistics</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_df</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(8, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">summary_df</span><span class="p">)</span>
<span class="go">            Summary Statistics</span>
<span class="go">Site number           03586500</span>
<span class="go">Begin date          2010-01-01</span>
<span class="go">End date            2010-12-31</span>
<span class="go">Count                      365</span>
<span class="go">Minimum                   2.48</span>
<span class="go">Mean                    207.43</span>
<span class="go">Median                    82.5</span>
<span class="go">Maximum                 3710.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.categorize_flows">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">categorize_flows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_years</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'NWD'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#categorize_flows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.categorize_flows" title="Link to this definition">¶</a></dt>
<dd><p>Function to categorize streamflows based on percentile ranges</p>
<p>This function assigns a category to each streamflow observation for a
single site by comparing the estimated percentile to a schema of percentile
ranges and associated category labels</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame containing percentile values for date(s) of interest for the
site.</p></li>
<li><p><strong>percentile_col</strong> (<em>str</em>) – Name of the column in the DataFrame that contains the data of
interest, in this case estimated streamflow percentile.</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column containing date information. If None, the index of
<cite>df</cite> is used.</p></li>
<li><p><strong>min_years</strong> (<em>int</em><em>, </em><em>optional</em>) – Minimum number of years of data required to calculate percentile
thresholds for a given day of year. Default is None. Use of min_years
setting requires that percentile_df be provided.</p></li>
<li><p><strong>percentile_df</strong> (<em>pd.DataFrame</em>) – DataFrame where columns are the percentile thresholds values and the
values are stored in a row called “values”. Typically generated by the
<cite>calculate_fixed_percentile_thresholds</cite> or <cite>munge_nwis_stats</cite> functions
but could be provided manually. Must be indexed by month_day and
include <cite>count</cite> column that represents number of years of records for
that day of year.</p></li>
<li><p><strong>schema_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the categorization schema that should be used to categorize
streamflow. Default is “NWD” schema.</p></li>
<li><p><strong>custom_schema</strong> (<em>dict</em><em>, </em><em>optional</em>) – Python dictionary describing custom schema to use for categorizing
streamflow based on percentiles. Required in dict is ‘ranges’, an array
of percentile cut points and ‘labels’, a list of category labels that
matches the number of bins represented by ranges. Optionally can
include ‘low_label’ and ‘high_label’ which are category labels
associated with the lowest and highest values in ‘ranges’,
respectively. Additional optional keys include ‘colors’, ‘low_color’,
and ‘high_color’ which specify a color palette that can be accessed in
user created plots and maps. Default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>df</strong> – DataFrame with flow_cat column added.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Categorize streamflow based on calculated percentiles for streamflow
records downloaded from NWIS.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;04288000&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;1900-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2021-12-31&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcts_df</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_variable_percentile_thresholds_by_day</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;04288000&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2022-05-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2022-05-07&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_percentiles</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_multiple_variable_percentiles_from_values</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="n">new_data</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">,</span> <span class="n">pcts_df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_percentiles</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">categorize_flows</span><span class="p">(</span><span class="n">new_percentiles</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;est_pct&#39;</span><span class="p">,</span> <span class="n">schema_name</span><span class="o">=</span><span class="s1">&#39;NWD&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_percentiles</span><span class="p">[[</span><span class="s1">&#39;est_pct&#39;</span><span class="p">,</span> <span class="s1">&#39;flow_cat&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
<span class="go">[[13.62, &#39;Below normal&#39;],</span>
<span class="go">[14.15, &#39;Below normal&#39;],</span>
<span class="go">[14.29, &#39;Below normal&#39;],</span>
<span class="go">[23.41, &#39;Below normal&#39;],</span>
<span class="go">[27.44, &#39;Normal&#39;],</span>
<span class="go">[16.2, &#39;Below normal&#39;],</span>
<span class="go">[12.81, &#39;Below normal&#39;]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.define_year_doy_columns">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">define_year_doy_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'calendar'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip_leap_day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#define_year_doy_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.define_year_doy_columns" title="Link to this definition">¶</a></dt>
<dd><p>Function to add year, day of year, and month-day columns to a DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_in</strong> (<em>pandas.DataFrame</em>) – DataFrame containing data to filter. Expects datetime information to be
available in the index or in a column named <cite>date_column_name</cite>.</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column containing date information. If None, the index of
<cite>df</cite> is used.</p></li>
<li><p><strong>year_type</strong> (<em>str</em><em>, </em><em>optional</em>) – The type of year to use. Must be one of ‘calendar’, ‘water’, or
‘climate’. Default is ‘calendar’ which starts the year on January 1
and ends on December 31. ‘water’ starts the year on October 1 and
ends on September 30 of the following year which is the “water year”.
For example, October 1, 2010 to September 30, 2011 is “water year
2011”. ‘climate’ years begin on April 1 and end on March 31 of the
following year, they are numbered by the ending year. For example,
April 1, 2010 to March 31, 2011 is “climate year 2011”.</p></li>
<li><p><strong>clip_leap_day</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, February 29 is removed from the DataFrame. Default is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>df</strong> – DataFrame with year, day of year, and month-day columns added. Also
makes the date_column_name the index of the DataFrame.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.filter_approved_data">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">filter_approved_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#filter_approved_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.filter_approved_data" title="Link to this definition">¶</a></dt>
<dd><p>Filter a dataframe to only return approved “A” (or “A, e”) data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – The data to filter.</p></li>
<li><p><strong>filter_column</strong> (<em>string</em>) – The column upon which to filter. If None, an error will be raised.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The filtered data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Filter synthetic data to only return approved data. First make some
synthetic data.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;approved&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A, e&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;P&#39;</span><span class="p">,</span> <span class="s1">&#39;P&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(5, 2)</span>
</pre></div>
</div>
<p>Then filter the data to only return approved data.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filter_approved_data</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">filter_column</span><span class="o">=</span><span class="s1">&#39;approved&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(3, 2)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.filter_data_by_month_day">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">filter_data_by_month_day</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month_day</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leading_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trailing_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_na</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#filter_data_by_month_day"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.filter_data_by_month_day" title="Link to this definition">¶</a></dt>
<dd><p>Function used to filter to a single month-day (alternate
to filter_data_by_time)</p>
<p>DataFrame containing data to filter. Expects datetime information to be
available in the index or in a column named <cite>date_column_name</cite>. The
returned <cite>pandas.Series</cite> object will have the datetimes for the specified
time (day, month, year) as the index, and the corresponding data from the
<cite>data_column_name</cite> column as the values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>month_day</strong> (<em>string</em>) – Time value to use for filtering in the format ‘MM-DD’.</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – Name of column containing data to filter.</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column containing date information. If None, the index of
<cite>df</cite> is used.</p></li>
<li><p><strong>leading_values</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of leading values to include in the output, inclusive.
Default is 0, and parameter only applies to ‘day’ time_interval.</p></li>
<li><p><strong>trailing_values</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of trailing values to include in the output, inclusive.
Default is 0, and parameter only applies to ‘day’ time_interval.</p></li>
<li><p><strong>drop_na</strong> (<em>bool</em><em>, </em><em>optional</em>) – Drop NA values within filtered data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>data</strong> – Data from the specified month-day, plus any leading/trailing
values.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.Series</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Filter some synthetic data by day of year. First make some synthetic data.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2019-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-01-04&#39;</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(4, 2)</span>
</pre></div>
</div>
<p>Then filter the data to get data from January 1st.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filter_data_by_month_day</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">df</span><span class="p">,</span> <span class="s1">&#39;01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">date_column_name</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(1,)</span>
</pre></div>
</div>
<p>Acquire and filter some real daily data to get all Jan. 1 data.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;03586500&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2000-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2003-01-05&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filter_data_by_month_day</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(4,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.filter_data_by_time">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">filter_data_by_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'day'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leading_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trailing_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_na</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#filter_data_by_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.filter_data_by_time" title="Link to this definition">¶</a></dt>
<dd><p>Filter data by some time interval.</p>
<p>DataFrame containing data to filter. Expects datetime information to be
available in the index or in a column named <cite>date_column_name</cite>. The
returned <cite>pandas.Series</cite> object will have the datetimes for the specified
time (day, month, year) as the index, and the corresponding data from the
<cite>data_column_name</cite> column as the values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>int</em>) – Time value to use for filtering; value can be a day of year (1-366),
month (1-12), or year (4 digit year).</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – Name of column containing data to filter.</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column containing date information. If None, the index of
<cite>df</cite> is used.</p></li>
<li><p><strong>time_interval</strong> (<em>str</em><em>, </em><em>optional</em>) – Time interval to filter by. Must be one of ‘day’, ‘month’, or ‘year’.
Default is ‘day’.</p></li>
<li><p><strong>leading_values</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of leading values to include in the output, inclusive.
Default is 0, and parameter only applies to ‘day’ time_interval.</p></li>
<li><p><strong>trailing_values</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of trailing values to include in the output, inclusive.
Default is 0, and parameter only applies to ‘day’ time_interval.</p></li>
<li><p><strong>drop_na</strong> (<em>bool</em><em>, </em><em>optional</em>) – Drop NA values within filtered data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>data</strong> – Data from the specified day of year.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.Series</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Filter some synthetic data by day of year. First make some synthetic data.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2019-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-01-04&#39;</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(4, 2)</span>
</pre></div>
</div>
<p>Then filter the data to get data from day 1.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filter_data_by_time</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">df</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">date_column_name</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(1,)</span>
</pre></div>
</div>
<p>Acquire and filter some real daily data to get all Jan. 1 data.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;03586500&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2000-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2003-01-05&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filter_data_by_time</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(4,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.filter_to_common_time">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">filter_to_common_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#filter_to_common_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.filter_to_common_time" title="Link to this definition">¶</a></dt>
<dd><p>Filter a list of dataframes to common times based on index.</p>
<p>This function takes a list of dataframes and filters them to only include
the common times based on the index of the dataframes. This is necessary
before comparing the timeseries and calculating statistics between two or
more timeseries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df_list</strong> (<em>list</em>) – List of pandas.DataFrame objects to filter to common times.
DataFrames assumed to have date-time information in the index.
Expect input to be the output from a function like
dataretrieval.nwis.get_dv() or similar.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>df_list</strong> (<em>list</em>) – List of pandas.DataFrame objects filtered to common times.</p></li>
<li><p><strong>n_obs</strong> (<em>int</em>) – Number of observations in the common time period.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Get some NWIS data.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span><span class="p">,</span> <span class="n">md1</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;03586500&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2018-12-15&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2019-01-07&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span><span class="p">,</span> <span class="n">md2</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;01646500&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2019-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2019-01-14&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">df1</span><span class="p">)</span>
<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">df2</span><span class="p">)</span>
<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
</pre></div>
</div>
<p>Filter the dataframes to common times.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df_list</span><span class="p">,</span> <span class="n">n_obs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filter_to_common_time</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(7, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(7, 3)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.leap_year_adjustment">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">leap_year_adjustment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'calendar'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#leap_year_adjustment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.leap_year_adjustment" title="Link to this definition">¶</a></dt>
<dd><p>Function to adjust leap year days in a DataFrame.</p>
<p>Adjust for a leap year by removing February 29 from the DataFrame and
adjusting the day of year values for the remaining days of the year
if a ‘doy_index’ column is present.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame containing data to adjust. Expects datetime information to be
available in the index and a column named ‘doy’ containing day of year.</p></li>
<li><p><strong>year_type</strong> (<em>str</em><em>, </em><em>optional</em>) – The type of year to use. Must be one of ‘calendar’, ‘water’, or
‘climate’. Default is ‘calendar’ which starts the year on January 1
and ends on December 31. ‘water’ starts the year on October 1 and
ends on September 30 of the following year which is the “water year”.
For example, October 1, 2010 to September 30, 2011 is “water year
2011”. ‘climate’ years begin on April 1 and end on March 31 of the
following year, they are numbered by the ending year. For example,
April 1, 2010 to March 31, 2011 is “climate year 2011”. Please note
that this input is used to adjust the day of year index when a leap
day is removed. If the dataframe does not have a day of year index,
this input is ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>df</strong> – DataFrame with leap year days removed and day of year values adjusted.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.munge_nwis_stats">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">munge_nwis_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#munge_nwis_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.munge_nwis_stats" title="Link to this definition">¶</a></dt>
<dd><p>Function to munge and reformat NWIS statistics data.</p>
<p>This is a utility function that exists to help munge NWIS percentile data
served via the NWIS statistics web service. This function uses the output
of nwis.get_stats() for daily data at a single site and for a single
parameter code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame containing NWIS statistics data retrieved from the statistics
web service. Assumed to come in as a dataframe retrieved with a
package like dataretrieval or similar.</p></li>
<li><p><strong>include_metadata</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, return additional columns from NWIS Stats Service including
count, mean, water year of start of record, water year of end of record</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>df</strong> – DataFrame containing munged and reformatted NWIS statistics data.
Reformatting is to match the format created by
calculate_variable_percentile_thresholds_by_day function.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Get some NWIS statistics data.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">md</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_stats</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;03586500&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span> <span class="n">statReportType</span><span class="o">=</span><span class="s2">&quot;daily&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then apply the function to munge the data.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">munge_nwis_stats</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(366, 15)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.retrieve_schema">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">retrieve_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#retrieve_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.retrieve_schema" title="Link to this definition">¶</a></dt>
<dd><p>Function used to retrieve the flow range categories given a schema name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>schema_name</strong> (<em>str</em>) – Name of the categorization schema that should be used to categorize
streamflow. Available options are ‘NWD’, ‘WaterWatch,
‘WaterWatch_Drought’, ‘WaterWatch_Flood’, ‘WaterWatch_BrownBlue’, and
‘NIDIS_Drought’.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>schema</strong> – dictionary of flow ranges, category labels, and color palette</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Retrieve the categorization schema ‘NWD’ to categorization flow similar to
the USGS National Water Dashboard</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">retrieve_schema</span><span class="p">(</span><span class="s1">&#39;NWD&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
<span class="go">{&#39;ranges&#39;: [0, 10, 25, 76, 90, 100],</span>
<span class="go">&#39;labels&#39;: [&#39;Much below normal&#39;, &#39;Below normal&#39;, &#39;Normal&#39;,</span>
<span class="go">    &#39;Above normal&#39;, &#39;Much above normal&#39;],</span>
<span class="go">&#39;colors&#39;: [&#39;#b24249&#39;, &#39;#e8ac49&#39;, &#39;#44f24e&#39;, &#39;#5fd7d9&#39;, &#39;#2641f1&#39;],</span>
<span class="go">&#39;low_label&#39;: &#39;All-time low for this day&#39;,</span>
<span class="go">&#39;low_color&#39;: &#39;#e82f3e&#39;,</span>
<span class="go">&#39;high_label&#39;: &#39;All-time high for this day&#39;,</span>
<span class="go">&#39;high_color&#39;: &#39;#1f296b&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.rolling_average">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">rolling_average</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_min_periods</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_min_periods</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#rolling_average"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.rolling_average" title="Link to this definition">¶</a></dt>
<dd><p>Calculate a rolling average for a dataframe.</p>
<p>Default behavior right-aligns the window used for the rolling average
and uses the data_type argument (‘1D’, ‘7D’, ‘14D’, ‘28D’) to set the
<cite>min_periods</cite> argument in <cite>pandas.DataFrame.rolling</cite>. The function
returns NaN values if any of the values in the window are NaN or if the
<cite>mind_periods</cite> argument is not satisifed. Properties of the windowing
can be changed by passing additional keyword arguments which are fed
to <cite>pandas.DataFrame.rolling</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – The dataframe to calculate the rolling average for.</p></li>
<li><p><strong>data_column_name</strong> (<em>string</em>) – The name of the column to calculate the rolling average for.</p></li>
<li><p><strong>data_type</strong> (<em>string</em>) – The formatted frequency string to be used with
pandas.DataFrame.rolling to calculate the average over the correct
temporal period.</p></li>
<li><p><strong>auto_min_periods</strong> (<em>bool</em>) – Defaults to True. When True, the <cite>min_periods</cite> argument in
<cite>pandas.DataFrame.rolling</cite> is set using the <cite>data_type</cite> argument.
For example, if the <cite>data_type</cite> = ‘7D’, the <cite>min_periods</cite>
argument is 7. When False, the <cite>min_periods</cite> argument is set
using the <cite>custom_min_periods</cite> input.</p></li>
<li><p><strong>custom_min_periods</strong> (<em>int</em><em>, </em><em>optional</em>) – Defaults to None. Only used if <cite>auto_min_periods</cite> is False.
If <cite>auto_min_periods</cite> is False and an integer is provided,
that integer will be used to define the <cite>min_periods</cite> argument
in <cite>pandas.DataFrame.rolling</cite>.</p></li>
<li><p><strong>**kwargs</strong> – Additional keyword arguments to be passed to
<cite>pandas.DataFrame.rolling</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The output dataframe with the rolling average values.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.utils.set_data_type">
<span class="sig-prename descclassname"><span class="pre">hyswap.utils.</span></span><span class="sig-name descname"><span class="pre">set_data_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/utils.html#set_data_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.utils.set_data_type" title="Link to this definition">¶</a></dt>
<dd><p>Function to set the data type for rolling averages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_type</strong> (<em>str</em>) – The type of data. Must be one of ‘daily’, ‘7-day’, ‘14-day’, and
‘28-day’. If ‘7-day’, ‘14-day’, or ‘28-day’ is
specified, the data will be averaged over the specified period. NaN
values will be used for any days that do not have data. If present,
NaN values will result in NaN values for the entire period.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>data_type</strong> – The formatted frequency string to be used with
pandas.DataFrame.rolling to calculate the average over the correct
temporal period.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-hyswap.exceedance">
<span id="exceedance-probability-functions"></span><h2>Exceedance Probability Functions<a class="headerlink" href="#module-hyswap.exceedance" title="Link to this heading">¶</a></h2>
<p>Exceedance probability calculations.</p>
<dl class="py function">
<dt class="sig sig-object py" id="hyswap.exceedance.calculate_exceedance_probability_from_distribution">
<span class="sig-prename descclassname"><span class="pre">hyswap.exceedance.</span></span><span class="sig-name descname"><span class="pre">calculate_exceedance_probability_from_distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/exceedance.html#calculate_exceedance_probability_from_distribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.exceedance.calculate_exceedance_probability_from_distribution" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the exceedance probability of a value relative to a distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em>) – The value for which to calculate the exceedance probability.</p></li>
<li><p><strong>dist</strong> (<em>str</em>) – The distribution to use. Must be one of ‘lognormal’, ‘normal’,
‘weibull’, or ‘exponential’.</p></li>
<li><p><strong>*args</strong> – Positional arguments to pass to the distribution, which is one of
<cite>stats.lognorm.sf</cite>, <cite>stats.norm.sf</cite>, <cite>stats.exponweib.sf</cite> or
<cite>stats.expon.sf</cite>, refer to the <cite>scipy.stats</cite> documentation for more
information about these arguments.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments to pass to the distribution, which is one of
<cite>stats.lognorm.sf</cite>, <cite>stats.norm.sf</cite>, <cite>stats.exponweib.sf</cite> or
<cite>stats.expon.sf</cite>, refer to the <cite>scipy.stats</cite> documentation for more
information about these arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The exceedance probability.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculating the exceedance probability of a value of 1 from a lognormal
distribution with a mean of 1 and a standard deviation of 0.25.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exceedance</span><span class="o">.</span><span class="n">calculate_exceedance_probability_from_distribution</span><span class="p">(</span>
<span class="gp">... </span>    <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;lognormal&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
<span class="go">0.6132049428659028</span>
</pre></div>
</div>
<p>Calculating the exceedance probability of a value of 1 from a normal
distribution with a mean of 1 and a standard deviation of 0.25.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exceedance</span><span class="o">.</span><span class="n">calculate_exceedance_probability_from_distribution</span><span class="p">(</span>
<span class="gp">... </span>    <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
<span class="go">0.5</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.exceedance.calculate_exceedance_probability_from_distribution_multiple">
<span class="sig-prename descclassname"><span class="pre">hyswap.exceedance.</span></span><span class="sig-name descname"><span class="pre">calculate_exceedance_probability_from_distribution_multiple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/exceedance.html#calculate_exceedance_probability_from_distribution_multiple"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.exceedance.calculate_exceedance_probability_from_distribution_multiple" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the exceedance probability of multiple values vs a distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<em>array-like</em>) – The values for which to calculate the exceedance probability.</p></li>
<li><p><strong>dist</strong> (<em>str</em>) – The distribution to use. Must be one of ‘lognormal’, ‘normal’,
‘weibull’, or ‘exponential’.</p></li>
<li><p><strong>*args</strong> – Positional arguments to pass to the distribution, which is one of
<cite>stats.lognorm.sf</cite>, <cite>stats.norm.sf</cite>, <cite>stats.exponweib.sf</cite> or
<cite>stats.expon.sf</cite>, refer to the <cite>scipy.stats</cite> documentation for more
information about these arguments.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments to pass to the distribution, which is one of
<cite>stats.lognorm.sf</cite>, <cite>stats.norm.sf</cite>, <cite>stats.exponweib.sf</cite> or
<cite>stats.expon.sf</cite>, refer to the <cite>scipy.stats</cite> documentation for more
information about these arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The exceedance probabilities.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculating the exceedance probability of a set of values of 1, 1.25 and
1.5 from a lognormal distribution with a mean of 1 and a standard
deviation of 0.25.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exceedance</span><span class="o">.</span><span class="n">calculate_exceedance_probability_from_distribution_multiple</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">],</span> <span class="s1">&#39;lognormal&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
<span class="go">array([0.61320494, 0.5       , 0.41171189])</span>
</pre></div>
</div>
<p>Calculating the exceedance probability of a set of values of 1, 2, 3, and 4
from a normal distribution with a mean of 1 and a standard deviation of
0.25.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exceedance</span><span class="o">.</span><span class="n">calculate_exceedance_probability_from_distribution_multiple</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
<span class="go">array([5.00000000e-01, 3.16712418e-05, 6.22096057e-16, 1.77648211e-33])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.exceedance.calculate_exceedance_probability_from_values">
<span class="sig-prename descclassname"><span class="pre">hyswap.exceedance.</span></span><span class="sig-name descname"><span class="pre">calculate_exceedance_probability_from_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values_to_compare</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'weibull'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/exceedance.html#calculate_exceedance_probability_from_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.exceedance.calculate_exceedance_probability_from_values" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the exceedance probability of a value compared to several values.</p>
<p>This function computes an exceedance probability using common plotting
position formulas, with the default being the ‘Weibull’ method (also known
as Type 6 in R). The value (x) is ranked among the values to compare by
determining the number that are <em>greater than or equal to</em> the
input value (x), which provides the minimum rank in the case of tied
values. Additional methods other than the ‘Weibull’ method can be specified
and are described in more detail in Helsel et al 2020.</p>
<dl class="simple">
<dt>Helsel, D.R., Hirsch, R.M., Ryberg, K.R., Archfield, S.A.,</dt><dd><p>and Gilroy, E.J., 2020, Statistical methods in water resources:
U.S. Geological Survey Techniques and Methods, book 4, chap. A3,
458 p., <a class="reference external" href="https://doi.org/10.3133/tm4a3">https://doi.org/10.3133/tm4a3</a>. [Supersedes USGS Techniques
of Water-Resources Investigations, book 4, chap. A3, version 1.1.]</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em>) – The value for which to calculate the exceedance probability.</p></li>
<li><p><strong>values_to_compare</strong> (<em>array-like</em>) – The values to use to calculate the exceedance probability.</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – Method (formulation) of plotting position formula.
Default is ‘weibull’ (Type 6). Additional available methods are
‘interpolated_inverted_cdf’ (Type 4), ‘hazen’ (Type 5),
‘linear’ (Type 7), ‘median_unbiased’ (Type 8), and ‘normal_unbiased’
(Type 9).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The exceedance probability.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculating the exceedance probability of a value of 1 from a set of values
of 1, 2, 3, and 4.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exceedance</span><span class="o">.</span><span class="n">calculate_exceedance_probability_from_values</span><span class="p">(</span>
<span class="gp">... </span>    <span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="go">1.0</span>
</pre></div>
</div>
<p>Calculating the exceedance probability of a value of 5 from a set of values
of 1, 2, 3, and 4.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exceedance</span><span class="o">.</span><span class="n">calculate_exceedance_probability_from_values</span><span class="p">(</span>
<span class="gp">... </span>    <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="go">0.0</span>
</pre></div>
</div>
<p>Fetch some data from NWIS and calculate the exceedance probability
for a value of 300 cfs. This is close to the maximum stream flow
value for this gage and date range, so the exceedance probability
is very small.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">site</span><span class="o">=</span><span class="s1">&#39;10171000&#39;</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">exceedance</span><span class="o">.</span><span class="n">calculate_exceedance_probability_from_values</span><span class="p">(</span>
<span class="gp">... </span>       <span class="mi">300</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;00060_Mean&#39;</span><span class="p">]),</span>
<span class="gp">... </span>       <span class="mi">6</span><span class="p">)</span>
<span class="go">0.000137</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.exceedance.calculate_exceedance_probability_from_values_multiple">
<span class="sig-prename descclassname"><span class="pre">hyswap.exceedance.</span></span><span class="sig-name descname"><span class="pre">calculate_exceedance_probability_from_values_multiple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values_to_compare</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'weibull'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/exceedance.html#calculate_exceedance_probability_from_values_multiple"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.exceedance.calculate_exceedance_probability_from_values_multiple" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the exceedance probability of multiple values vs a set of values.
All methods supported in <em>calculate_exceedance_probability_from_values</em>
are supported and by default uses the ‘Weibull’ method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<em>array-like</em>) – The values for which to calculate the exceedance probability.</p></li>
<li><p><strong>values_to_compare</strong> (<em>array-like</em>) – The values to use to calculate the exceedance probability.</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – Method (formulation) of plotting position formula.
Default is ‘weibull’ (Type 6). Additional available methods are
‘interpolated_inverted_cdf’ (Type 4), ‘hazen’ (Type 5),
‘linear’ (Type 7), ‘median_unbiased’ (Type 8), and ‘normal_unbiased’
(Type 9).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The exceedance probabilities.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculating the exceedance probability of a set of values of 1, 1.25 and
1.5 from a set of values of 1, 2, 3, and 4.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exceedance</span><span class="o">.</span><span class="n">calculate_exceedance_probability_from_values_multiple</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Type 4&#39;</span><span class="p">)</span>
<span class="go">array([1.  , 0.75, 0.5 ])</span>
</pre></div>
</div>
<p>Fetch some data from NWIS and calculate the exceedance probability for a
set of 5 values spaced evenly between the minimum and maximum values.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_gwlevels</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="s1">&#39;434400121275801&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;lev_va&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
<span class="gp">... </span>                     <span class="n">df</span><span class="p">[</span><span class="s1">&#39;lev_va&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exceedance</span><span class="o">.</span><span class="n">calculate_exceedance_probability_from_values_multiple</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">values</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;lev_va&#39;</span><span class="p">])</span>
<span class="go">array([1.        , 0.96363636, 0.83636364, 0.47272727, 0.01818182])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-hyswap.rasterhydrograph">
<span id="raster-hydrograph-functions"></span><h2>Raster Hydrograph Functions<a class="headerlink" href="#module-hyswap.rasterhydrograph" title="Link to this heading">¶</a></h2>
<p>Raster hydrograph functionality.</p>
<dl class="py function">
<dt class="sig sig-object py" id="hyswap.rasterhydrograph._calculate_date_range">
<span class="sig-prename descclassname"><span class="pre">hyswap.rasterhydrograph.</span></span><span class="sig-name descname"><span class="pre">_calculate_date_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_year</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/rasterhydrograph.html#_calculate_date_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.rasterhydrograph._calculate_date_range" title="Link to this definition">¶</a></dt>
<dd><p>Private function to calculate the date range and set the index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – The data to format. Must have a date column or the index must be the
date values.</p></li>
<li><p><strong>year_type</strong> (<em>str</em>) – The type of year to use. Must be one of ‘calendar’, ‘water’, or
‘climate’.</p></li>
<li><p><strong>begin_year</strong> (<em>int</em><em>, </em><em>None</em>) – The first year to include in the data. If None, the first year in
the data will be used.</p></li>
<li><p><strong>end_year</strong> (<em>int</em><em>, </em><em>None</em>) – The last year to include in the data. If None, the last year in the
data will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>date_range</strong> – The date range.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DatetimeIndex</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.rasterhydrograph._check_inputs">
<span class="sig-prename descclassname"><span class="pre">hyswap.rasterhydrograph.</span></span><span class="sig-name descname"><span class="pre">_check_inputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip_leap_day</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/rasterhydrograph.html#_check_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.rasterhydrograph._check_inputs" title="Link to this definition">¶</a></dt>
<dd><p>Private function to check inputs for the format_data function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – The data to format. Must have a date column or the index must be the
date values.</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – The name of the column containing the data.</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>None</em>) – The name of the column containing the date or None if the index is
the date.</p></li>
<li><p><strong>data_type</strong> (<em>str</em>) – The type of data. Must be one of ‘daily’, ‘7-day’, ‘14-day’, and
‘28-day’. If ‘7-day’, ‘14-day’, or ‘28-day’ is
specified, the data will be averaged over the specified period. NaN
values will be used for any days that do not have data. If present,
NaN values will result in NaN values for the entire period.</p></li>
<li><p><strong>year_type</strong> (<em>str</em>) – The type of year to use. Must be one of ‘calendar’ or ‘water’.
‘calendar’ starts the year on January 1 and ends on
December 31. ‘water’ starts the year on October 1 and ends on
September 30.</p></li>
<li><p><strong>begin_year</strong> (<em>int</em><em>, </em><em>None</em>) – The first year to include in the data. If None, the first year in
the data will be used.</p></li>
<li><p><strong>end_year</strong> (<em>int</em><em>, </em><em>None</em>) – The last year to include in the data. If None, the last year in the
data will be used.</p></li>
<li><p><strong>clip_leap_day</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, removes leap day ‘02-29’ from the percentiles dataset
used to create the plot.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>df</strong> – The dataframe with the date column formatted as a datetime and set as
the index. New year and doy (day of year) columns are added too and
are set based on the year_type. Feb 29th is also removed from the
dataframe if it exists.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.rasterhydrograph.format_data">
<span class="sig-prename descclassname"><span class="pre">hyswap.rasterhydrograph.</span></span><span class="sig-name descname"><span class="pre">format_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'daily'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'calendar'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">begin_year</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_year</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip_leap_day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/rasterhydrograph.html#format_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.rasterhydrograph.format_data" title="Link to this definition">¶</a></dt>
<dd><p>Format data for raster hydrograph.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – The data to format. Must have a date column or the index must be the
date values.</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – The name of the column containing the data.</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the column containing the date. Default is None which
assumes the index is the date.</p></li>
<li><p><strong>data_type</strong> (<em>str</em><em>, </em><em>optional</em>) – The type of data. Must be one of ‘daily’, ‘7-day’, ‘14-day’, and
‘28-day’. Default is ‘daily’. If ‘7-day’, ‘14-day’, or ‘28-day’ is
specified, the data will be averaged over the specified period. NaN
values will be used for any days that do not have data. If present,
NaN values will result in NaN values for the entire period.</p></li>
<li><p><strong>year_type</strong> (<em>str</em><em>, </em><em>optional</em>) – The type of year to use. Must be one of ‘calendar’, ‘water’, or
‘climate’. Default is ‘calendar’ which starts the year on January 1
and ends on December 31. ‘water’ starts the year on October 1 and
ends on September 30 of the following year which is the “water year”.
For example, October 1, 2010 to September 30, 2011 is “water year
2011”. ‘climate’ years begin on April 1 and end on March 31 of the
following year, they are numbered by the ending year. For example,
April 1, 2010 to March 31, 2011 is “climate year 2011”.</p></li>
<li><p><strong>begin_year</strong> (<em>int</em><em>, </em><em>optional</em>) – The first year to include in the data. Default is None which uses the
first year in the data.</p></li>
<li><p><strong>end_year</strong> (<em>int</em><em>, </em><em>optional</em>) – The last year to include in the data. Default is None which uses the
last year in the data.</p></li>
<li><p><strong>clip_leap_day</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, removes leap day ‘02-29’ from the percentiles dataset
used to create the plot. Defaults to False.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments to pass to the pandas.DataFrame.rolling method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted data starting on the first day of the first year and
ending on the last day of the last year with the specified data type
and year type.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Formatting synthetic daily data for a raster hydrograph.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2010&#39;</span><span class="p">,</span> <span class="s1">&#39;12/31/2010&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">365</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_formatted</span> <span class="o">=</span> <span class="n">rasterhydrograph</span><span class="o">.</span><span class="n">format_data</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_formatted</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">2010</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">df_formatted</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="go">365</span>
</pre></div>
</div>
<p>Formatting real daily data for a raster hydrograph.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;03586500&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2000-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2002-12-31&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_formatted</span> <span class="o">=</span> <span class="n">rasterhydrograph</span><span class="o">.</span><span class="n">format_data</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_formatted</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">2000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">df_formatted</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="go">365</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-hyswap.percentiles">
<span id="percentile-calculation-functions"></span><h2>Percentile Calculation Functions<a class="headerlink" href="#module-hyswap.percentiles" title="Link to this heading">¶</a></h2>
<p>Percentile calculation functions.</p>
<dl class="py function">
<dt class="sig sig-object py" id="hyswap.percentiles.calculate_fixed_percentile_from_value">
<span class="sig-prename descclassname"><span class="pre">hyswap.percentiles.</span></span><span class="sig-name descname"><span class="pre">calculate_fixed_percentile_from_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile_df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/percentiles.html#calculate_fixed_percentile_from_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.percentiles.calculate_fixed_percentile_from_value" title="Link to this definition">¶</a></dt>
<dd><p>Calculate percentile from a value and fixed percentile thresholds.</p>
<p>This function enables faster calculation of the percentile associated with
a given value if percentile values and corresponding fixed percentile
thresholds are known from other data from the same station or site.
This calculation is done using linear interpolation. A value greater than
the largest streamflow value in the percentile threshold dataframe results
in a percentile of 100. A value less than the smallest streamflow value in
the percentile threshold dataframe results in a percentile of 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>float</em><em>, </em><em>np.ndarray</em>) – New value(s) to calculate percentile for. Can be a single value or an
array of values.</p></li>
<li><p><strong>percentile_df</strong> (<em>pd.DataFrame</em>) – DataFrame where columns are the percentile thresholds values and the
values are stored in a row called “values”. Typically generated by the
<cite>calculate_fixed_percentile_thresholds</cite> functions but could be
provided manually or from data pulled from the NWIS stats service.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>percentile</strong> – Percentile associated with the input value(s).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float, np.ndarray</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculate the percentile associated with a value from some synthetic data.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1001</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2022-09-27&#39;</span><span class="p">)})</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">)</span>  <span class="c1"># noqa: E501</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcts_df</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_fixed_percentile_thresholds</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">,</span> <span class="s1">&#39;values&#39;</span><span class="p">,</span> <span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">95</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_percentile</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_fixed_percentile_from_value</span><span class="p">(</span>
<span class="gp">... </span>    <span class="mi">500</span><span class="p">,</span> <span class="n">pcts_df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_percentile</span>
<span class="go">50.0</span>
</pre></div>
</div>
<p>Calculate the percentiles associated with multiple values for some data
downloaded from NWIS.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;04288000&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;1900-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2021-12-31&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcts_df</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_fixed_percentile_thresholds</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">95</span><span class="p">,],</span>
<span class="gp">... </span>    <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;04288000&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2022-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2022-01-07&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_data</span><span class="p">[</span><span class="s1">&#39;est_pct&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_fixed_percentile_from_value</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="n">new_data</span><span class="p">[</span><span class="s1">&#39;00060_Mean&#39;</span><span class="p">],</span> <span class="n">pcts_df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_data</span><span class="p">[</span><span class="s1">&#39;est_pct&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[62.9, 75.0, 55.65, 47.54, 53.55, 55.32, 50.97]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.percentiles.calculate_fixed_percentile_thresholds">
<span class="sig-prename descclassname"><span class="pre">hyswap.percentiles.</span></span><span class="sig-name descname"><span class="pre">calculate_fixed_percentile_thresholds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">array([5,</span> <span class="pre">10,</span> <span class="pre">25,</span> <span class="pre">50,</span> <span class="pre">75,</span> <span class="pre">90,</span> <span class="pre">95])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'weibull'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_na</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_min_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_out_of_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/percentiles.html#calculate_fixed_percentile_thresholds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.percentiles.calculate_fixed_percentile_thresholds" title="Link to this definition">¶</a></dt>
<dd><p>Calculate fixed percentile thresholds using historical data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em><em> or </em><em>array-like</em>) – DataFrame, Series, or 1-D array containing data used to calculate
percentile thresholds. If DataFrame, “data_column_name” must be
specified and expects a datetime index unless “date_column_name” is
provided. If Series, must include a datetime index. If 1-D array, then
“include_metadata” must be set to False since a datetime index is not
included with data.</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column containing data to analyze if input is a DataFrame.
Default is None.</p></li>
<li><p><strong>percentiles</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Percentiles to calculate. Default is (5, 10, 25, 50, 75, 90, 95).
Note: Values of 0 and 100 are ignored as unbiased plotting position
formulas do not assign values to 0 or 100th percentile.</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – Method to use to calculate percentiles. Default is ‘weibull’ (Type 6).
Additional available methods are ‘interpolated_inverted_cdf’ (Type 4),
‘hazen’ (Type 5), ‘linear’ (Type 7), ‘median_unbiased’ (Type 8),
and ‘normal_unbiased’ (Type 9).</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – For data provided as DataFrame, name of column containing date
information. If None, the index of <cite>data</cite> is used.</p></li>
<li><p><strong>ignore_na</strong> (<em>bool</em><em>, </em><em>optional</em>) – Ignore NA values in percentile calculations</p></li>
<li><p><strong>include_min_max</strong> (<em>bool</em><em>, </em><em>optional</em>) – When set to True, include min and max streamflow value in addition to
streamflow values for percentile levels. Default is True.</p></li>
<li><p><strong>include_metadata</strong> (<em>bool</em><em>, </em><em>optional</em>) – When set to True, return additional columns describing the data
including count, mean, start_yr, end_yr. Default is True. Input data
must include a datetime column as either index or specified by
date_column_name.</p></li>
<li><p><strong>mask_out_of_range</strong> (<em>bool</em><em>, </em><em>optional</em>) – When set to True, percentiles that are beyond the min/max percentile
ranks of the observed data to be NA. Effect of this being enables is
that high or low percentiles may not be calculated when few data points
are available. Default is True.</p></li>
<li><p><strong>**kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Additional keyword arguments to pass to <cite>numpy.percentile</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>percentiles</strong> – Percentiles of the data in a DataFrame so the thresholds and
percentile values are tied together.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculate percentile thresholds from some synthetic data using ‘linear’
method.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">101</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-04-10&#39;</span><span class="p">)})</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">)</span>  <span class="c1"># noqa: E501</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_fixed_percentile_thresholds</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">,</span> <span class="s1">&#39;values&#39;</span><span class="p">,</span> <span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">95</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span>
<span class="go">        min   p25   p75   p95  max  mean  count start_yr end_yr</span>
<span class="go">values    0  25.0  75.0  95.0  100  50.0    101     2020   2020</span>
</pre></div>
</div>
<p>Calculate percentile thresholds without additional metadata columns</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_fixed_percentile_thresholds</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">,</span> <span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">95</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">include_metadata</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span>
<span class="go">        min  p05   p25   p75   p95  max</span>
<span class="go">values    0  5.0  25.0  75.0  95.0  100</span>
</pre></div>
</div>
<dl>
<dt>Calculate percentile thresholds using default ‘weibull’ method</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_fixed_percentile_thresholds</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">,</span> <span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">95</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">include_metadata</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span>
<span class="go">        min  p05   p25   p50   p75   p95  max</span>
<span class="go">values    0  4.1  24.5  50.0  75.5  95.9  100</span>
</pre></div>
</div>
</dd>
</dl>
<p>Calculate percentile thresholds from a small number of observations and
mask out out of range percentile levels</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_fixed_percentile_thresholds</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">,</span> <span class="n">percentiles</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">99</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">include_metadata</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span>
<span class="go">        min  p01  p10  p50  p90  p99  max</span>
<span class="go">values    0  NaN  0.2  5.0  9.8  NaN   10</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.percentiles.calculate_multiple_variable_percentiles_from_values">
<span class="sig-prename descclassname"><span class="pre">hyswap.percentiles.</span></span><span class="sig-name descname"><span class="pre">calculate_multiple_variable_percentiles_from_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/percentiles.html#calculate_multiple_variable_percentiles_from_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.percentiles.calculate_multiple_variable_percentiles_from_values" title="Link to this definition">¶</a></dt>
<dd><p>Calculate variable percentiles for multiple values</p>
<p>This function enables calculation of estimated percentiles for multiple
values across multiple days of the year using existing variable percentile
thresholds. This calculation is done using linear interpolation.
A value greater than the largest streamflow value in the
percentile threshold dataframe for the month-day of interest results
in a percentile of 100. A value less than the smallest streamflow value in
the percentile threshold dataframe results in a percentile of 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – Pandas dataframe containing new values to calculate percentiles for.</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – Name of column containing data to analyze.</p></li>
<li><p><strong>percentile_df</strong> (<em>pd.DataFrame</em>) – DataFrame containing threshold percentiles of data by day of year.
Typically generated by the <cite>calculate_variable_percentile_thresholds</cite>
functions but could be provided manually or from data pulled from the
NWIS stats service.</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column containing date information. If None, the index of
<cite>df</cite> is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>df</strong> – Pandas dataframe of values with estimated percentile column added</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculate the percentiles associated with multiple values using flow
records downloaded from NWIS.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;04288000&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;1900-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2021-12-31&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcts_df</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_variable_percentile_thresholds_by_day</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">95</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;04288000&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2022-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2022-01-07&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_percentiles</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_multiple_variable_percentiles_from_values</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="n">new_data</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">,</span> <span class="n">pcts_df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_percentiles</span><span class="p">[</span><span class="s1">&#39;est_pct&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[64.81, 77.7, 56.67, 45.0, 55.59, 59.38, 49.12]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.percentiles.calculate_variable_percentile_from_value">
<span class="sig-prename descclassname"><span class="pre">hyswap.percentiles.</span></span><span class="sig-name descname"><span class="pre">calculate_variable_percentile_from_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month_day</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/percentiles.html#calculate_variable_percentile_from_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.percentiles.calculate_variable_percentile_from_value" title="Link to this definition">¶</a></dt>
<dd><p>Calculate percentile from a value and variable percentile thresholds.</p>
<p>This function enables faster calculation of the percentile associated with
a given value for a single day of the year if percentile values and
corresponding variable percentile thresholds are known from other data from
the same station or site. This calculation is done using linear
interpolation. A value greater than the largest streamflow value in the
percentile threshold dataframe for the month-day of interest results
in a percentile of 100. A value less than the smallest streamflow value in
the percentile threshold dataframe results in a percentile of 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>float</em><em>, </em><em>np.ndarray</em>) – New value(s) to calculate percentile for. Can be a single value or an
array of values.</p></li>
<li><p><strong>percentile_df</strong> (<em>pd.DataFrame</em>) – DataFrame containing threshold percentiles of data by day of year.
Typically generated by the <cite>calculate_variable_percentile_thresholds</cite>
function but could be provided manually or from data pulled from the
NWIS stats service.</p></li>
<li><p><strong>month_day</strong> (<em>str</em>) – string of month-day of year to lookup percentile thresholds for value</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>percentile</strong> – Percentile associated with the input value(s).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float, np.ndarray</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculate the percentile associated with a value using flow records
downloaded from NWIS.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;03586500&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;1776-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2022-12-31&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcts_df</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_variable_percentile_thresholds_by_day</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="n">data</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">95</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_percentile</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_variable_percentile_from_value</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="mi">500</span><span class="p">,</span> <span class="n">pcts_df</span><span class="p">,</span> <span class="s1">&#39;06-30&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_percentile</span>
<span class="go">96.58</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.percentiles.calculate_variable_percentile_thresholds_by_day">
<span class="sig-prename descclassname"><span class="pre">hyswap.percentiles.</span></span><span class="sig-name descname"><span class="pre">calculate_variable_percentile_thresholds_by_day</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[5,</span> <span class="pre">10,</span> <span class="pre">25,</span> <span class="pre">50,</span> <span class="pre">75,</span> <span class="pre">90,</span> <span class="pre">95]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'weibull'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'daily'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leading_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trailing_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip_leap_day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_na</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_min_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_out_of_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/percentiles.html#calculate_variable_percentile_thresholds_by_day"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.percentiles.calculate_variable_percentile_thresholds_by_day" title="Link to this definition">¶</a></dt>
<dd><p>Calculate variable percentile thresholds of data by day</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame containing data to calculate daily percentile thresholds for.</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – Name of column containing data to analyze.</p></li>
<li><p><strong>percentiles</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Percentile thresholds to calculate, default is
[5, 10, 25, 50, 75, 90, 95]. Note: Values of 0 and 100 are ignored as
unbiased plotting position formulas do not assign values to 0 or 100th
percentile.</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – Method to use to calculate percentiles. Default is ‘weibull’ (Type 6).
Additional available methods are ‘interpolated_inverted_cdf’ (Type 4),
‘hazen’ (Type 5), ‘linear’ (Type 7), ‘median_unbiased’ (Type 8),
and ‘normal_unbiased’ (Type 9).</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column containing date information. If None, the index of
<cite>df</cite> is used.</p></li>
<li><p><strong>data_type</strong> (<em>str</em><em>, </em><em>optional</em>) – The type of data. Must be one of ‘daily’, ‘7-day’, ‘14-day’, and
‘28-day’. Default is ‘daily’. If ‘7-day’, ‘14-day’, or ‘28-day’ is
specified, the data will be averaged over the specified period. NaN
values will be used for any days that do not have data. If present,
NaN values will result in NaN values for the entire period.</p></li>
<li><p><strong>leading_values</strong> (<em>int</em><em>, </em><em>optional</em>) – For the temporal filtering, this is an argument setting the
number of leading values to include in the output, inclusive.
Default is 0, and parameter only applies to ‘day’ time_interval.</p></li>
<li><p><strong>trailing_values</strong> (<em>int</em><em>, </em><em>optional</em>) – For the temporal filtering, this is an argument setting the
number of trailing values to include in the output, inclusive.
Default is 0, and parameter only applies to ‘day’ time_interval.</p></li>
<li><p><strong>clip_leap_day</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, February 29 is removed from the DataFrame. Default is False.</p></li>
<li><p><strong>ignore_na</strong> (<em>bool</em><em>, </em><em>optional</em>) – Ignore NA values in percentile calculations</p></li>
<li><p><strong>include_min_max</strong> (<em>bool</em><em>, </em><em>optional</em>) – When set to True, include min and max streamflow value in addition to
streamflow values for percentile levels. Default is True.</p></li>
<li><p><strong>include_metadata</strong> (<em>bool</em><em>, </em><em>optional</em>) – When set to True, return additional columns describing the data
including count, mean, start_yr, end_yr. Default is True</p></li>
<li><p><strong>mask_out_of_range</strong> (<em>bool</em><em>, </em><em>optional</em>) – When set to True, percentiles that are beyond the min/max percentile
ranks of the observed data to be NA. Effect of this being enables is
that high or low percentiles may not be calculated when few data points
are available. Default is True.</p></li>
<li><p><strong>**kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Additional keyword arguments to pass to <cite>numpy.percentile</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>percentiles</strong> – DataFrame containing threshold percentiles of data by month-day.
Will return a DataFrame of NaNs for each percentile/day if
provided an empty DataFrame or DataFrame with insufficient data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculate default thresholds by day from some real data in
preparation for plotting.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;03586500&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;1776-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2022-12-31&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_variable_percentile_thresholds_by_day</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="n">df</span><span class="p">,</span> <span class="s2">&quot;00060_Mean&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>  <span class="c1"># 366 days in a leap year</span>
<span class="go">366</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.percentiles.calculate_variable_percentile_thresholds_by_day_of_year">
<span class="sig-prename descclassname"><span class="pre">hyswap.percentiles.</span></span><span class="sig-name descname"><span class="pre">calculate_variable_percentile_thresholds_by_day_of_year</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[5,</span> <span class="pre">10,</span> <span class="pre">25,</span> <span class="pre">50,</span> <span class="pre">75,</span> <span class="pre">90,</span> <span class="pre">95]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'weibull'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'daily'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'calendar'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leading_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trailing_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip_leap_day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_na</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_min_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_out_of_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/percentiles.html#calculate_variable_percentile_thresholds_by_day_of_year"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.percentiles.calculate_variable_percentile_thresholds_by_day_of_year" title="Link to this definition">¶</a></dt>
<dd><p>Calculate variable percentile thresholds of data by day of year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame containing data to calculate daily percentile thresholds for.</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – Name of column containing data to analyze.</p></li>
<li><p><strong>percentiles</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Percentile thresholds to calculate, default is
[5, 10, 25, 50, 75, 90, 95]. Note: Values of 0 and 100 are ignored as
unbiased plotting position formulas do not assign values to 0 or 100th
percentile.</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – Method to use to calculate percentiles. Default is ‘weibull’ (Type 6).
Additional available methods are ‘interpolated_inverted_cdf’ (Type 4),
‘hazen’ (Type 5), ‘linear’ (Type 7), ‘median_unbiased’ (Type 8),
and ‘normal_unbiased’ (Type 9).</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column containing date information. If None, the index of
<cite>df</cite> is used.</p></li>
<li><p><strong>data_type</strong> (<em>str</em><em>, </em><em>optional</em>) – The type of data. Must be one of ‘daily’, ‘7-day’, ‘14-day’, and
‘28-day’. Default is ‘daily’. If ‘7-day’, ‘14-day’, or ‘28-day’ is
specified, the data will be averaged over the specified period. NaN
values will be used for any days that do not have data. If present,
NaN values will result in NaN values for the entire period.</p></li>
<li><p><strong>year_type</strong> (<em>str</em><em>, </em><em>optional</em>) – The type of year to use. Must be one of ‘calendar’, ‘water’, or
‘climate’. Default is ‘calendar’ which starts the year on January 1
and ends on December 31. ‘water’ starts the year on October 1 and
ends on September 30 of the following year which is the “water year”.
For example, October 1, 2010 to September 30, 2011 is “water year
2011”. ‘climate’ years begin on April 1 and end on March 31 of the
following year, they are numbered by the ending year. For example,
April 1, 2010 to March 31, 2011 is “climate year 2011”.</p></li>
<li><p><strong>leading_values</strong> (<em>int</em><em>, </em><em>optional</em>) – For the temporal filtering, this is an argument setting the
number of leading values to include in the output, inclusive.
Default is 0, and parameter only applies to ‘day’ time_interval.</p></li>
<li><p><strong>trailing_values</strong> (<em>int</em><em>, </em><em>optional</em>) – For the temporal filtering, this is an argument setting the
number of trailing values to include in the output, inclusive.
Default is 0, and parameter only applies to ‘day’ time_interval.</p></li>
<li><p><strong>clip_leap_day</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, February 29 is removed from the DataFrame. Default is False.</p></li>
<li><p><strong>ignore_na</strong> (<em>bool</em><em>, </em><em>optional</em>) – Ignore NA values in percentile calculations</p></li>
<li><p><strong>include_min_max</strong> (<em>bool</em><em>, </em><em>optional</em>) – When set to True, include min and max streamflow value in addition to
streamflow values for percentile levels. Default is True.</p></li>
<li><p><strong>include_metadata</strong> (<em>bool</em><em>, </em><em>optional</em>) – When set to True, return additional columns describing the data
including count, mean, start_yr, end_yr. Default is True</p></li>
<li><p><strong>mask_out_of_range</strong> (<em>bool</em><em>, </em><em>optional</em>) – When set to True, percentiles that are beyond the min/max percentile
ranks of the observed data to be NA. Effect of this being enables is
that high or low percentiles may not be calculated when few data points
are available. Default is True.</p></li>
<li><p><strong>**kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Additional keyword arguments to pass to <cite>numpy.percentile</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>percentiles</strong> – DataFrame containing threshold percentiles of data by day of year.
The DataFrame has a multi-index of ‘doy’ and ‘year_type’.
Returns a DataFrame of NaNs for each percentile/day if
provided an empty DataFrame or DataFrame with insufficient data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculate default thresholds by day of year from some real data in
preparation for plotting.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;03586500&quot;</span><span class="p">,</span> <span class="n">parameterCd</span><span class="o">=</span><span class="s2">&quot;00060&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;1776-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2022-12-31&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_variable_percentile_thresholds_by_day_of_year</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="n">df</span><span class="p">,</span> <span class="s2">&quot;00060_Mean&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>  <span class="c1"># 366 days in a leap year</span>
<span class="go">366</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-hyswap.cumulative">
<span id="cumulative-calculation-functions"></span><h2>Cumulative Calculation Functions<a class="headerlink" href="#module-hyswap.cumulative" title="Link to this heading">¶</a></h2>
<p>Cumulative calculation functions.</p>
<dl class="py function">
<dt class="sig sig-object py" id="hyswap.cumulative._tidy_cumulative_dataframe">
<span class="sig-prename descclassname"><span class="pre">hyswap.cumulative.</span></span><span class="sig-name descname"><span class="pre">_tidy_cumulative_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/cumulative.html#_tidy_cumulative_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.cumulative._tidy_cumulative_dataframe" title="Link to this definition">¶</a></dt>
<dd><p>Tidy a cumulative dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cdf</strong> (<em>pandas.DataFrame</em>) – DataFrame containing cumulative values, rows are years, columns are
days of year.</p></li>
<li><p><strong>year_type</strong> (<em>str</em>) – The type of year to use. Must be one of ‘calendar’, ‘water’, or
‘climate’. Default is ‘calendar’ which starts the year on January 1
and ends on December 31. ‘water’ starts the year on October 1 and
ends on September 30 of the following year which is the “water year”.
For example, October 1, 2010 to September 30, 2011 is “water year
2011”. ‘climate’ years begin on April 1 and end on March 31 of the
following year, they are numbered by the ending year. For example,
April 1, 2010 to March 31, 2011 is “climate year 2011”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>cdf</strong> – DataFrame containing cumulative values, rows are dates, columns include
years, day of year (doy), and cumulative values.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.cumulative.calculate_daily_cumulative_values">
<span class="sig-prename descclassname"><span class="pre">hyswap.cumulative.</span></span><span class="sig-name descname"><span class="pre">calculate_daily_cumulative_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'calendar'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'acre-feet'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip_leap_day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/cumulative.html#calculate_daily_cumulative_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.cumulative.calculate_daily_cumulative_values" title="Link to this definition">¶</a></dt>
<dd><p>Calculate daily cumulative values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame containing data to calculate cumulative values.</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – Name of column containing data to calculate cumulative values for.
Discharge data assumed to be in unit of ft3/s.</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column containing date information. If None, the index of
<cite>df</cite> will be used.</p></li>
<li><p><strong>year_type</strong> (<em>str</em><em>, </em><em>optional</em>) – The type of year to use. Must be one of ‘calendar’, ‘water’, or
‘climate’. Default is ‘calendar’ which starts the year on January 1
and ends on December 31. ‘water’ starts the year on October 1 and
ends on September 30 of the following year which is the “water year”.
For example, October 1, 2010 to September 30, 2011 is “water year
2011”. ‘climate’ years begin on April 1 and end on March 31 of the
following year, they are numbered by the ending year. For example,
April 1, 2010 to March 31, 2011 is “climate year 2011”.</p></li>
<li><p><strong>unit</strong> (<em>str</em><em>, </em><em>optional</em>) – The unit the user wants to use to report cumulative flow. One of
‘acre-feet’, ‘cfs’, ‘cubic-meters’, ‘cubic-feet’. Assumes input
data are in cubic feet per second (cfs).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>cumulative_values</strong> – DataFrame containing daily cumulative values for each year in the
input DataFrame, rows are dates and columns include years, month-days,
day-of-year and cumulative values in the units specified.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculate daily cumulative values from some synthetic data.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;2000-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2000-12-31&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">366</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">cumulative</span><span class="o">.</span><span class="n">calculate_daily_cumulative_values</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">df</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">date_column_name</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="go">[&#39;index_month_day&#39;, &#39;index_year&#39;, &#39;index_doy&#39;, &#39;cumulative&#39;]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-hyswap.plots">
<span id="plotting-functions"></span><h2>Plotting Functions<a class="headerlink" href="#module-hyswap.plots" title="Link to this heading">¶</a></h2>
<p>Functions for plotting.</p>
<dl class="py function">
<dt class="sig sig-object py" id="hyswap.plots.plot_cumulative_hydrograph">
<span class="sig-prename descclassname"><span class="pre">hyswap.plots.</span></span><span class="sig-name descname"><span class="pre">plot_cumulative_hydrograph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_years</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'calendar'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'acre-feet'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">envelope_pct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[25,</span> <span class="pre">75]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_year</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_year</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disclaimer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Cumulative</span> <span class="pre">Streamflow</span> <span class="pre">Hydrograph'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Cumulative</span> <span class="pre">discharge,</span> <span class="pre">acre-feet'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Month'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip_leap_day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/plots.html#plot_cumulative_hydrograph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.plots.plot_cumulative_hydrograph" title="Link to this definition">¶</a></dt>
<dd><p>Plot a cumulative hydrograph.</p>
<p>The cumulative-streamflow hydrograph is a graphical presentation of
recent cumulative daily streamflow (discharge) observed at an
individual USGS streamgage, plotted over the long-term statistics
of streamflow for each day of the year at that station. Typically,
the statistics, based on quality assured and approved data, include
the maximum annual cumulative discharge recorded during the period
of record; the mean-daily cumulative flow for each day; the minimum
cumulative discharge recorded for each day.</p>
<p>Note: For some streams, flow statistics may have been computed from
mixed regulated and unregulated flows; this can affect depictions
of flow conditions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Dataframe containing the data to plot.</p></li>
<li><p><strong>target_years</strong> (<em>int</em><em>, or </em><em>list</em>) – Target year(s) to plot in black as the line. Can provide a single year
as an integer, or a list of years.</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – Name of column containing data to calculate cumulative values for.
Discharge data assumed to be in unit of ft3/s.</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column containing date information. If None, the index of
<cite>df</cite> will be used.</p></li>
<li><p><strong>unit</strong> (<em>str</em><em>, </em><em>optional</em>) – The unit the user wants to use to report cumulative flow. One of
‘acre-feet’, ‘cfs’, ‘cubic-meters’, ‘cubic-feet’. Assumes input
data are in cubic feet per second (cfs).</p></li>
<li><p><strong>envelope_pct</strong> (<em>list</em><em>, </em><em>optional</em>) – List of percentiles to plot as the envelope. Default is [25, 75].
If an empty list, [], then no envelope is plotted.</p></li>
<li><p><strong>max_year</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, plot the cumulative flow for the year with the maximum
end of the year cumulative value as a dashed line. Default is False.</p></li>
<li><p><strong>min_year</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, plot the cumulative flow for the year with the minimum
end of the year cumulative value as a dashed line. Default is False.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes.Axes</em><em>, </em><em>optional</em>) – Axes to plot on. If not provided, a new figure and axes will be
created.</p></li>
<li><p><strong>disclaimer</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, displays the disclaimer ‘For some streams, flow
statistics may have been computed from mixed regulated
and unregulated flows; this can affect depictions of flow
conditions.’ below the x-axis.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title for the plot. If not provided, the default title will be
‘Cumulative Streamflow Hydrograph’.</p></li>
<li><p><strong>ylab</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for the y-axis. If not provided, the default label will be
‘Cumulative Streamflow, ft3/s’.</p></li>
<li><p><strong>xlab</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for the x-axis. If not provided, the default label will be
‘Month’.</p></li>
<li><p><strong>clip_leap_day</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, removes leap day ‘02-29’ from the percentiles dataset
used to create the plot. Defaults to False.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">matplotlib.axes.Axes.fill_between()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Axes object containing the plot.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>matplotlib.axes.Axes</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Fetch some data from NWIS and make a cumulative hydrograph plot.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="s1">&#39;06892350&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">parameterCd</span><span class="o">=</span><span class="s1">&#39;00060&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">start</span><span class="o">=</span><span class="s1">&#39;1900-01-01&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2021-12-31&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">plot_cumulative_hydrograph</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">df</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">data_column_name</span><span class="o">=</span><span class="s1">&#39;00060_Mean&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">target_years</span><span class="o">=</span><span class="mi">2020</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;2020 Cumulative Streamflow Hydrograph, site 06892350&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference download internal" download="" href="../_downloads/dee6133dc7dafb0acdb835ed1a146e63/index-1.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/19099a788c202562b65a4a2144e1175e/index-1.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/index-1.png" class="plot-directive" src="../_images/index-1.png" />
</figure>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.plots.plot_duration_hydrograph">
<span class="sig-prename descclassname"><span class="pre">hyswap.plots.</span></span><span class="sig-name descname"><span class="pre">plot_duration_hydrograph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">percentiles_by_day</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pct_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[5,</span> <span class="pre">10,</span> <span class="pre">25,</span> <span class="pre">75,</span> <span class="pre">90,</span> <span class="pre">95]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disclaimer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Duration</span> <span class="pre">Hydrograph'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Discharge,</span> <span class="pre">ft3/s'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Month-Year'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/plots.html#plot_duration_hydrograph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.plots.plot_duration_hydrograph" title="Link to this definition">¶</a></dt>
<dd><p>Plot a duration hydrograph.</p>
<p>The duration hydrograph is a graphical presentation of recent daily
streamflow (discharge) observed at an individual USGS streamgage,
plotted over the long-term statistics of streamflow for each day of
the year at that station. Typically, the statistics (based on quality
assured and approved data) include the maximum discharge recorded during
the period of record for each day of the year; the 90th percentile flow
for each day; the interquartile range (75th percentile on top and 25th
percentile on the bottom); the 10th percentile flow for each day; and the
minimum discharge recorded for each day. This function, however, allows
the user to plot a custom list of percentiles.</p>
<p>Note: For some streams, flow statistics may have been computed from
mixed regulated and unregulated flows; this can affect depictions
of flow conditions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>percentiles_by_day</strong> (<em>pandas.DataFrame</em>) – Dataframe containing the percentiles by month-day.
Note that this plotting function is incompatible
with percentiles calculated by day-of-year.</p></li>
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Dataframe containing the data to plot.</p></li>
<li><p><strong>data_col</strong> (<em>str</em>) – Column name of the data to plot.</p></li>
<li><p><strong>date_column_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Defaults to None. If None, index is assumed to contain datetime
information.</p></li>
<li><p><strong>pct_list</strong> (<em>list</em><em>, </em><em>optional</em>) – List of integers corresponding to the percentile values to be
plotted. Values of 0 and 100 are ignored as unbiased plotting position
formulas do not assign values to 0 or 100th percentile.
Defaults to 5, 10, 25, 75, 90, 95.</p></li>
<li><p><strong>data_label</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for the data to plot. If not provided, a default label will
be used.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes.Axes</em><em>, </em><em>optional</em>) – Axes to plot on. If not provided, a new figure and axes will be
created.</p></li>
<li><p><strong>disclaimer</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, displays the disclaimer ‘For some streams, flow
statistics may have been computed from mixed regulated
and unregulated flows; this can affect depictions of flow
conditions.’ below the x-axis.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title for the plot. If not provided, the default title will be
‘Duration Hydrograph’.</p></li>
<li><p><strong>ylab</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for the y-axis. If not provided, the default label will be
‘Discharge, ft3/s’.</p></li>
<li><p><strong>xlab</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for the x-axis. If not provided, the default label will be
‘Month’.</p></li>
<li><p><strong>colors</strong> (<em>list</em><em>, </em><em>optional</em>) – List of colors to use for the lines. If not provided, a default
list of colors will be used. The max number of colors in this
list is seven.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">matplotlib.axes.Axes.fill_between()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Axes object containing the plot.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>matplotlib.axes.Axes</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Fetch some data from NWIS and make a streamflow duration hydrograph plot.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="s1">&#39;06892350&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">parameterCd</span><span class="o">=</span><span class="s1">&#39;00060&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">start</span><span class="o">=</span><span class="s1">&#39;1900-01-01&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2022-12-31&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pct_by_day</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">percentiles</span><span class="o">.</span><span class="n">calculate_variable_percentile_thresholds_by_day</span><span class="p">(</span>  <span class="c1"># noqa: E501</span>
<span class="gp">... </span>    <span class="n">df</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_2022</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="mi">2022</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">plot_duration_hydrograph</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">pct_by_day</span><span class="p">,</span> <span class="n">df_2022</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">data_label</span><span class="o">=</span><span class="s1">&#39;2022 Daily Mean Discharge&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Duration Hydrograph for USGS Site 06892350&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference download internal" download="" href="../_downloads/fc45bf934e3811753fe600c3a66c6841/index-2.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/b49052630b2006dab0653b45ed145794/index-2.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/index-2.png" class="plot-directive" src="../_images/index-2.png" />
</figure>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.plots.plot_flow_duration_curve">
<span class="sig-prename descclassname"><span class="pre">hyswap.plots.</span></span><span class="sig-name descname"><span class="pre">plot_flow_duration_curve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exceedance_probabilities</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observation_probabilities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Flow</span> <span class="pre">Duration</span> <span class="pre">Curve'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Exceedance</span> <span class="pre">Probability\n(Percentage</span> <span class="pre">of</span> <span class="pre">time</span> <span class="pre">indicated</span> <span class="pre">value</span> <span class="pre">was</span> <span class="pre">equaled</span> <span class="pre">or</span> <span class="pre">exceeded)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Discharge,</span> <span class="pre">ft3/s'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scatter_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/plots.html#plot_flow_duration_curve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.plots.plot_flow_duration_curve" title="Link to this definition">¶</a></dt>
<dd><p>Plot a flow duration curve.</p>
<p>Flow duration curves are cumulative frequency curves that show the
percentage of time measured discharge values are equaled or exceeded
by all other discharge values in the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<em>array-like</em>) – Values to plot along y-axis.</p></li>
<li><p><strong>exceedance_probabilities</strong> (<em>array-like</em>) – Exceedance probabilities for each value, likely calculated from
a function like <a class="reference internal" href="#hyswap.exceedance.calculate_exceedance_probability_from_values_multiple" title="hyswap.exceedance.calculate_exceedance_probability_from_values_multiple"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hyswap.exceedance.calculate_exceedance_probability_from_values_multiple</span></code></a>.</p></li>
<li><p><strong>observations</strong> (<em>list</em><em>, </em><em>numpy.ndarray</em><em>, </em><em>optional</em>) – List, numpy array or list-able set of flow observations. Optional, if
not provided the observations are not plotted.</p></li>
<li><p><strong>observation_probabilities</strong> (<em>list</em><em>, </em><em>numpy.ndarray</em><em>, </em><em>optional</em>) – Exceedance probabilities corresponding to each observation, likely
calculated from a function like
<a class="reference internal" href="#hyswap.exceedance.calculate_exceedance_probability_from_values_multiple" title="hyswap.exceedance.calculate_exceedance_probability_from_values_multiple"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hyswap.exceedance.calculate_exceedance_probability_from_values_multiple</span></code></a>.
Optional, if not provided observations are not plotted.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes.Axes</em><em>, </em><em>optional</em>) – Axes to plot on. If not provided, a new figure and axes will be
created.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title for the plot. If not provided, the default title will be
‘Flow Duration Curve’.</p></li>
<li><p><strong>xlab</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for the x-axis. If not provided, a default label will be used.</p></li>
<li><p><strong>ylab</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for the y-axis. If not provided, a default label will be used.</p></li>
<li><p><strong>grid</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to show grid lines on the plot. Default is True.</p></li>
<li><p><strong>scatter_kwargs</strong> (<em>dict</em>) – Dictionary containing keyword arguments to pass to the observations
plotting method, <code class="xref py py-meth docutils literal notranslate"><span class="pre">matplotlib.axes.Axes.scatter()</span></code>.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">matplotlib.axes.Axes.plot()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Axes object containing the plot.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>matplotlib.axes.Axes</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Fetch some data from NWIS, calculate the exceedance probabilities and then
make the flow duration curve.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="s1">&#39;06892350&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">parameterCd</span><span class="o">=</span><span class="s1">&#39;00060&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">start</span><span class="o">=</span><span class="s1">&#39;1776-07-04&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;00060_Mean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
<span class="gp">... </span>                     <span class="n">df</span><span class="p">[</span><span class="s1">&#39;00060_Mean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exceedance_probabilities</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">exceedance</span><span class="o">.</span><span class="n">calculate_exceedance_probability_from_values_multiple</span><span class="p">(</span>  <span class="c1"># noqa</span>
<span class="gp">... </span>    <span class="n">values</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;00060_Mean&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">plot_flow_duration_curve</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">values</span><span class="p">,</span> <span class="n">exceedance_probabilities</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Flow Duration Curve for USGS Site 06892350&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference download internal" download="" href="../_downloads/4ead256d405dfdd65dec28f814f9c71e/index-3.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/4267ab6a2b7d67bf2141024b973405b7/index-3.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/index-3.png" class="plot-directive" src="../_images/index-3.png" />
</figure>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.plots.plot_hydrograph">
<span class="sig-prename descclassname"><span class="pre">hyswap.plots.</span></span><span class="sig-name descname"><span class="pre">plot_hydrograph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Streamflow</span> <span class="pre">Hydrograph'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Discharge,</span> <span class="pre">ft3/s'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yscale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'log'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/plots.html#plot_hydrograph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.plots.plot_hydrograph" title="Link to this definition">¶</a></dt>
<dd><p>Plot a simple hydrograph.</p>
<p>Hydrographs show the streamflow discharge over time at a single station.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame containing the data to plot.</p></li>
<li><p><strong>data_col</strong> (<em>str</em>) – Name of the column containing the data to plot.</p></li>
<li><p><strong>date_col</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the column containing the dates. If not provided, the index
will be used.</p></li>
<li><p><strong>start_date</strong> (<em>str</em><em>, </em><em>optional</em>) – Start date for the plot. If not provided, the minimum date in the
DataFrame will be used.</p></li>
<li><p><strong>end_date</strong> (<em>str</em><em>, </em><em>optional</em>) – End date for the plot. If not provided, the maximum date in the
DataFrame will be used.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes.Axes</em><em>, </em><em>optional</em>) – Axes object to plot on. If not provided, a new figure and axes will be
created.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title of the plot. Default is ‘Streamflow Hydrograph’.</p></li>
<li><p><strong>ylab</strong> (<em>str</em><em>, </em><em>optional</em>) – Y-axis label. Default is ‘Streamflow, ft3/s’.</p></li>
<li><p><strong>xlab</strong> (<em>str</em><em>, </em><em>optional</em>) – X-axis label. Default is ‘Date’.</p></li>
<li><p><strong>yscale</strong> (<em>str</em><em>, </em><em>optional</em>) – Y-axis scale. Default is ‘log’. Options are ‘linear’ or ‘log’.</p></li>
<li><p><strong>**kwargs</strong> – Additional keyword arguments to pass to matplotlib.pyplot.plot().</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Axes object containing the plot.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>matplotlib.axes.Axes</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Fetch data for a USGS gage and plot the hydrograph.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">siteno</span> <span class="o">=</span> <span class="s1">&#39;06892350&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="n">siteno</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">parameterCd</span><span class="o">=</span><span class="s1">&#39;00060&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2019-01-01&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">plot_hydrograph</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">df</span><span class="p">,</span> <span class="n">data_col</span><span class="o">=</span><span class="s1">&#39;00060_Mean&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;2019 Hydrograph for Station </span><span class="si">{</span><span class="n">siteno</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ylab</span><span class="o">=</span><span class="s1">&#39;Discharge, ft3/s&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">xlab</span><span class="o">=</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="n">yscale</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference download internal" download="" href="../_downloads/0a3bb3a7936b691f6ca82a73dc59798a/index-4.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/ce18f60330380b8f27feb9d15e4adc50/index-4.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/index-4.png" class="plot-directive" src="../_images/index-4.png" />
</figure>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.plots.plot_raster_hydrograph">
<span class="sig-prename descclassname"><span class="pre">hyswap.plots.</span></span><span class="sig-name descname"><span class="pre">plot_raster_hydrograph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_formatted</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Raster</span> <span class="pre">Hydrograph'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Month'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Year'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cbarlab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Discharge,</span> <span class="pre">ft3/s'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/plots.html#plot_raster_hydrograph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.plots.plot_raster_hydrograph" title="Link to this definition">¶</a></dt>
<dd><p>Plot a raster hydrograph.</p>
<p>Raster hydrographs are pixel-based plots for visualizing and identifying
variations and changes in large multidimensional data sets. Originally
developed by Keim (2000), they were first applied in hydrology by
Koehler (2004) as a means of highlighting inter-annual and intra-annual
changes in streamflow. The raster hydrographs in hyswap, like those
developed by Koehler, depict years on the y-axis and days along the
x-axis. Users can choose to plot streamflow (actual values or log values),
streamflow percentile, or streamflow class (from 1, for low flow, to 7
for high flow), for Daily, 7-Day, 14-Day, and 28-Day streamflow. For a
more comprehensive description of raster hydrographs, see Strandhagen
et al. (2006).</p>
<p>References:
Keim, D.A. 2000. Designing pixel-oriented visualization techniques:
theory and applications. IEEE Transactions on Visualization and
Computer Graphics, 6(1), 59-78.</p>
<p>Koehler, R. 2004. Raster Based Analysis and Visualization of Hydrologic
Time Series. Ph.D  dissertation, University of Arizona. Tucson, AZ, 189 p.</p>
<p><a href="#id1"><span class="problematic" id="id2">`Strandhagen, E., Marcus, W.A., and Meacham, J.E. 2006. Views of the
rivers: representing streamflow of the greater Yellowstone ecosystem.
Cartographic Perspectives, no. 55, 54-29.`__</span></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_formatted</strong> (<em>pandas.DataFrame</em>) – Formatted dataframe containing the raster hydrograph data.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes.Axes</em><em>, </em><em>optional</em>) – Axes to plot on. If not provided, a new figure and axes will be
created.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title for the plot. If not provided, the default title will be
‘Streamflow Raster Hydrograph’.</p></li>
<li><p><strong>xlab</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for the x-axis. If not provided, the default label will be
‘Month’.</p></li>
<li><p><strong>ylab</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for the y-axis. If not provided, the default label will be
‘Year’.</p></li>
<li><p><strong>cbarlab</strong> (<em>str</em><em>, </em><em>optional</em>) – Label for the colorbar. If not provided, the default label will be
‘Discharge, ft3/s’.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">matplotlib.axes.Axes.imshow()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Axes object containing the plot.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>matplotlib.axes.Axes</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Fetch some data from NWIS, format it for a raster hydrograph plot and then
make the raster hydrograph plot.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="s1">&#39;09380000&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">parameterCd</span><span class="o">=</span><span class="s1">&#39;00060&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">start</span><span class="o">=</span><span class="s1">&#39;1960-01-01&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">end</span><span class="o">=</span><span class="s1">&#39;1970-12-31&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_rh</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">rasterhydrograph</span><span class="o">.</span><span class="n">format_data</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">plot_raster_hydrograph</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">df_rh</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Raster Hydrograph for USGS Site 09380000&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference download internal" download="" href="../_downloads/e9d5e504d5f81a4473f97487d551c0f9/index-5.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/fec0b38022b1aa4c603f84937bd75473/index-5.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/index-5.png" class="plot-directive" src="../_images/index-5.png" />
</figure>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.plots.plot_similarity_heatmap">
<span class="sig-prename descclassname"><span class="pre">hyswap.plots.</span></span><span class="sig-name descname"><span class="pre">plot_similarity_heatmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_obs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inferno'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Similarity</span> <span class="pre">Matrix'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/plots.html#plot_similarity_heatmap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.plots.plot_similarity_heatmap" title="Link to this definition">¶</a></dt>
<dd><p>Plot a similarity matrix heatmap.</p>
<p>The heatmap shows the results of a correlation matrix between
measurements at two or more sites. Lighter, warmer colors denote
higher similarity (correlation), while darker colors denote less
similarity between two sites.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim_matrix</strong> (<em>pandas.DataFrame</em>) – Similarity matrix to plot. Must be square. Can be the output of
<a class="reference internal" href="#hyswap.similarity.calculate_correlations" title="hyswap.similarity.calculate_correlations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">hyswap.similarity.calculate_correlations()</span></code></a>,
<a class="reference internal" href="#hyswap.similarity.calculate_wasserstein_distance" title="hyswap.similarity.calculate_wasserstein_distance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">hyswap.similarity.calculate_wasserstein_distance()</span></code></a>,
<a class="reference internal" href="#hyswap.similarity.calculate_energy_distance" title="hyswap.similarity.calculate_energy_distance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">hyswap.similarity.calculate_energy_distance()</span></code></a>, or any other
square matrix represented as a pandas DataFrame.</p></li>
<li><p><strong>cmap</strong> (<em>str</em><em>, </em><em>optional</em>) – Colormap to use. Default is ‘inferno’.</p></li>
<li><p><strong>show_values</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to show the values of the matrix on the plot. Default is False.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes.Axes</em><em>, </em><em>optional</em>) – Axes object to plot on. If not provided, a new figure and axes will be
created.</p></li>
<li><p><strong>title</strong> (<em>str</em><em>, </em><em>optional</em>) – Title for the plot. Default is ‘Similarity Matrix’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Axes object containing the plot.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>matplotlib.axes.Axes</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculate the correlation matrix between two sites and plot it as a
heatmap.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="s1">&#39;06892350&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">parameterCd</span><span class="o">=</span><span class="s1">&#39;00060&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2010-01-01&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2021-12-31&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dataretrieval</span><span class="o">.</span><span class="n">nwis</span><span class="o">.</span><span class="n">get_dv</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="s1">&#39;06892000&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">parameterCd</span><span class="o">=</span><span class="s1">&#39;00060&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2010-01-01&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2021-12-31&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corr_matrix</span><span class="p">,</span> <span class="n">n_obs</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">similarity</span><span class="o">.</span><span class="n">calculate_correlations</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">],</span> <span class="s1">&#39;00060_Mean&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">hyswap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">plot_similarity_heatmap</span><span class="p">(</span><span class="n">corr_matrix</span><span class="p">,</span>
<span class="gp">... </span>                                          <span class="n">show_values</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference download internal" download="" href="../_downloads/869827d4a39dc05a6ff889cd05729475/index-6.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/72ef893d3fadbacea7b6adae1e4280aa/index-6.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/index-6.png" class="plot-directive" src="../_images/index-6.png" />
</figure>
</dd></dl>

</section>
<section id="module-hyswap.runoff">
<span id="runoff-calculation-functions"></span><h2>Runoff Calculation Functions<a class="headerlink" href="#module-hyswap.runoff" title="Link to this heading">¶</a></h2>
<p>Runoff functions for hyswap.</p>
<dl class="py function">
<dt class="sig sig-object py" id="hyswap.runoff.calculate_geometric_runoff">
<span class="sig-prename descclassname"><span class="pre">hyswap.runoff.</span></span><span class="sig-name descname"><span class="pre">calculate_geometric_runoff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geom_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runoff_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geom_intersection_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">site_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geom_id_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prop_geom_in_basin_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'prop_huc_in_basin'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prop_basin_in_geom_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'prop_basin_in_huc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip_downstream_basins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_overlap_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.98</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/runoff.html#calculate_geometric_runoff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.runoff.calculate_geometric_runoff" title="Link to this definition">¶</a></dt>
<dd><p>Function to calculate the runoff for a specified geometry. Uses
tabular dataframe containing proportion of geometry in each
intersecting basin and proportion of intersecting basins in the
specified geometry, as well as a dataframe of basin runoff values.
Note that this function only calculates estimated runoff using
intersecting basins with a complete runoff record over the
entire date range of the dataframe. For this reason, the user
may want to break up runoff calculations by month, year, or some
other time step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geom_id</strong> (<em>str</em>) – Geometry ID for the geometry of interest.</p></li>
<li><p><strong>runoff_df</strong> (<em>pandas.DataFrame</em>) – Dataframe containing runoff data for each site in the
geometry. Dataframe is expected to have a date index entitled
‘datetime’, a site id column entitled ‘site_no’, and a data
column entitled ‘runoff’ filled with runoff data.</p></li>
<li><p><strong>geom_intersection_df</strong> (<em>pandas.DataFrame</em>) – Tabular dataFrame containing columns indicating the site numbers,
geometry ids, proportion of geometry in basin, and proportion
of basin within geometry.</p></li>
<li><p><strong>site_col</strong> (<em>str</em>) – Column in geom_intersection_df with drainage area site numbers.
Please make sure ids have the correct number of digits and have
not lost leading 0s when read in. If the site numbers are the
geom_intersection_df index col, site_col = ‘index’.</p></li>
<li><p><strong>geom_id_col</strong> (<em>str</em>) – Column in geom_intersection_df with geometry ids.</p></li>
<li><p><strong>prop_geom_in_basin_col</strong> (<em>str</em>) – Name of column with values (type:float) representing the proportion
(0 to 1) of the spatial geometry occurring in the corresponding
drainage area. Default name: ‘prop_in_basin’</p></li>
<li><p><strong>prop_basin_in_geom_col</strong> (<em>str</em>) – Name of column with values (type:float) representing the proportion
(0 to 1) of the drainage area occurring in the corresponding
spatial geometry. Default name: ‘prop_in_huc’</p></li>
<li><p><strong>percentage</strong> (<em>boolean</em><em>, </em><em>optional</em>) – If the values in geom_intersection_df are percentages,
percentage = True. If the values are decimal proportions,
percentage = False. Default: False</p></li>
<li><p><strong>clip_downstream_basins</strong> (<em>boolean</em><em>, </em><em>optional</em>) – When True, the function estimates runoff using only basins that are
(a) contained within the geometry and (b) the smallest basin
containing the geometry in the weighted average. When False,
the function uses all overlapping basins to estimate runoff
for the geometry. Defaults to True.</p></li>
<li><p><strong>full_overlap_threshold</strong> (<em>float</em><em>, </em><em>optional</em>) – The minimum proportion of overlap between geometry and basin that
constitutes “full” overlap. For example, occasionally a geometry
(or basin) may be completely contained by a basin (or geometry),
but polygon border artifacts might cause the intersection to be
slightly less than 1. This input accounts for that error.
Defaults to 0.98.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataframe containing the area-weighted runoff values for the geometry,
as well as the number of sites used to generate the weight, the site
ids, and the max weight for any site used in the weighting calculation.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.runoff.calculate_multiple_geometric_runoff">
<span class="sig-prename descclassname"><span class="pre">hyswap.runoff.</span></span><span class="sig-name descname"><span class="pre">calculate_multiple_geometric_runoff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geom_id_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runoff_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geom_intersection_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">site_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geom_id_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prop_geom_in_basin_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'prop_huc_in_basin'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prop_basin_in_geom_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'prop_basin_in_huc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip_downstream_basins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_overlap_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.98</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/runoff.html#calculate_multiple_geometric_runoff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.runoff.calculate_multiple_geometric_runoff" title="Link to this definition">¶</a></dt>
<dd><p>Calculate runoff for multiple geometries at once using
<cite>hyswap.calculate_geometric_runoff()</cite>.
Note that this function only calculates estimated runoff using
intersecting basins with a complete runoff record over the
entire date range of the dataframe. For this reason, the user
may want to break up runoff calculations by month, year, or some
other time step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geom_id_list</strong> (<em>list</em>) – List of geometry ID strings for the geometries of interest.
These should be columns in the weights matrix.</p></li>
<li><p><strong>runoff_df</strong> (<em>pandas.DataFrame</em>) – Dataframe containing runoff data for each site in the
geometry. Dataframe is expected to have a date index entitled
‘datetime’, a site id column entitled ‘site_no’, and a data
column entitled ‘runoff’ filled with runoff data.</p></li>
<li><p><strong>geom_intersection_df</strong> (<em>pandas.DataFrame</em>) – Tabular dataFrame containing columns indicating the site numbers,
geometry ids, proportion of geometry in basin, and proportion
of basin within geometry.</p></li>
<li><p><strong>site_col</strong> (<em>str</em>) – Column in geom_intersection_df with drainage area site numbers.
Please make sure ids have the correct number of digits
and have not lost leading 0s when read in. If the site
numbers are the geom_intersection_df index col, site_col = ‘index’.</p></li>
<li><p><strong>geom_id_col</strong> (<em>str</em>) – Column in geom_intersection_df with geometry ids.</p></li>
<li><p><strong>prop_geom_in_basin_col</strong> (<em>str</em>) – Name of column with values (type:float) representing the proportion
(0 to 1) of the spatial geometry occurring in the corresponding
drainage area. Default name: ‘pct_in_basin’</p></li>
<li><p><strong>prop_basin_in_geom_col</strong> (<em>str</em>) – Name of column with values (type:float) representing the proportion
(0 to 1) of the drainage area occurring in the corresponding
spatial geometry. Default name: ‘pct_in_huc’</p></li>
<li><p><strong>percentage</strong> (<em>boolean</em><em>, </em><em>optional</em>) – If the values in geom_intersection_df are percentages,
percentage = True. If the values are decimal proportions,
percentage = False. Default: False</p></li>
<li><p><strong>clip_downstream_basins</strong> (<em>boolean</em><em>, </em><em>optional</em>) – When True, the function estimates runoff using only basins that are
(a) contained within the geometry and (b) the smallest basin
containing the geometry in the weighted average. When False,
the function uses all overlapping basins to estimate runoff
for the geometry. Defaults to True.</p></li>
<li><p><strong>full_overlap_threshold</strong> (<em>float</em><em>, </em><em>optional</em>) – The minimum proportion of overlap between geometry and basin that
constitutes “full” overlap. For example, occasionally a geometry
(or basin) may be completely contained by a basin (or geometry),
but polygon border artifacts might cause the intersection to be
slightly less than 1. This input accounts for that error.
Defaults to 0.98.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame containing the area-weighted runoff values for each
geometry, as well as the number of sites used to generate the
weights, the site ids, and the max weight for any site used
in the weighting calculation for each geometry.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.runoff.convert_cfs_to_runoff">
<span class="sig-prename descclassname"><span class="pre">hyswap.runoff.</span></span><span class="sig-name descname"><span class="pre">convert_cfs_to_runoff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drainage_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'annual'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/runoff.html#convert_cfs_to_runoff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.runoff.convert_cfs_to_runoff" title="Link to this definition">¶</a></dt>
<dd><p>Convert cfs to runoff values for some drainage area.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfs</strong> (<em>float</em>) – Flow in cubic feet per second.</p></li>
<li><p><strong>drainage_area</strong> (<em>float</em>) – Drainage area in km2.</p></li>
<li><p><strong>frequency</strong> (<em>str</em><em>, </em><em>optional</em>) – Frequency of runoff values to return. Options are ‘annual’,
‘monthly’, and ‘daily’. Default is ‘annual’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Runoff in mm/&lt;frequency&gt;.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Convert 14 cfs to mm/yr for a 250 km2 drainage area.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mmyr</span> <span class="o">=</span> <span class="n">runoff</span><span class="o">.</span><span class="n">convert_cfs_to_runoff</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">mmyr</span><span class="p">)</span>
<span class="go">50.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.runoff.identify_sites_from_geom_intersection">
<span class="sig-prename descclassname"><span class="pre">hyswap.runoff.</span></span><span class="sig-name descname"><span class="pre">identify_sites_from_geom_intersection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geom_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geom_intersection_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geom_id_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">site_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prop_geom_in_basin_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'prop_huc_in_basin'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prop_basin_in_geom_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'prop_basin_in_huc'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/runoff.html#identify_sites_from_geom_intersection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.runoff.identify_sites_from_geom_intersection" title="Link to this definition">¶</a></dt>
<dd><p>Identify sites for a specified geometry.</p>
<p>Function to identify streamgage sites that have drainage areas
intersecting a given spatial geometry (e.g. HUC8) from the
output table of a previously computed spatial intersection
of drainage areas and spatial geometries. This function is a
helper function that can be used to reduce the number of NWIS
queries that are performed to construct the list of dataframes
for a given geometry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geom_id</strong> (<em>str</em>) – Geometry ids to filter to (e.g. geom_id = ‘03030006’).
Ids range from 8 to 10 digits and sometime involve a leading 0.</p></li>
<li><p><strong>geom_intersection_df</strong> (<em>pandas.DataFrame</em>) – Tabular dataFrame containing columns indicating the site numbers,
geometry ids, proportion of geometry in basin, and proportion
of basin within geometry.</p></li>
<li><p><strong>geom_id_col</strong> (<em>str</em>) – Column in geom_intersection_df with geometry ids.</p></li>
<li><p><strong>site_col</strong> (<em>str</em>) – Column in geom_intersection_df with drainage area site numbers.
Please make sure ids have the correct number of digits and have
not lost leading 0s when read in. If the site numbers are the
geom_intersection_df index col, site_col = ‘index’.</p></li>
<li><p><strong>prop_geom_in_basin_col</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column with values (type:float) representing the proportion
(0 to 1) of the spatial geometry occurring in the corresponding
drainage area. Default name: ‘prop_huc_in_basin’</p></li>
<li><p><strong>prop_basin_in_geom_col</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of column with values (type:float) representing the proportion
(0 to 1)of the drainage area occurring in the corresponding
spatial geometry. Default name: ‘prop_basin_in_huc’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of site IDs with drainage areas that intersect the geometry</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Find all drainage area site numbers that intersect with geometry id 0101002</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;01014000&#39;</span><span class="p">,</span> <span class="s1">&#39;01010002&#39;</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;01014001&#39;</span><span class="p">,</span> <span class="s1">&#39;01010002&#39;</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;01014002&#39;</span><span class="p">,</span> <span class="s1">&#39;01010003&#39;</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span>
<span class="gp">... </span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;site_no&#39;</span><span class="p">,</span> <span class="s1">&#39;geom_id&#39;</span><span class="p">,</span> <span class="s1">&#39;prop_huc_in_basin&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;prop_basin_in_huc&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sites_lst</span> <span class="o">=</span> <span class="n">runoff</span><span class="o">.</span><span class="n">identify_sites_from_geom_intersection</span><span class="p">(</span>
<span class="gp">... </span><span class="n">geom_intersection_df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">geom_id</span><span class="o">=</span><span class="s1">&#39;01010002&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">geom_id_col</span><span class="o">=</span><span class="s1">&#39;geom_id&#39;</span><span class="p">,</span> <span class="n">site_col</span><span class="o">=</span><span class="s1">&#39;site_no&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">prop_geom_in_basin_col</span><span class="o">=</span><span class="s1">&#39;prop_huc_in_basin&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">prop_basin_in_geom_col</span><span class="o">=</span><span class="s1">&#39;prop_basin_in_huc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sites_lst</span><span class="p">)</span>
<span class="go">[&#39;01014000&#39;, &#39;01014001&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.runoff.streamflow_to_runoff">
<span class="sig-prename descclassname"><span class="pre">hyswap.runoff.</span></span><span class="sig-name descname"><span class="pre">streamflow_to_runoff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drainage_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'annual'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/runoff.html#streamflow_to_runoff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.runoff.streamflow_to_runoff" title="Link to this definition">¶</a></dt>
<dd><p>Convert streamflow to runoff for a given drainage area.</p>
<p>For a given gage/dataframe, convert streamflow to runoff using the
drainage area and the convert_cfs_to_runoff function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame containing streamflow data.</p></li>
<li><p><strong>data_col</strong> (<em>str</em>) – Column name containing streamflow data, assumed to be in cfs.</p></li>
<li><p><strong>drainage_area</strong> (<em>float</em>) – Drainage area in km2.</p></li>
<li><p><strong>frequency</strong> (<em>str</em><em>, </em><em>optional</em>) – Frequency of runoff values to return. Options are ‘annual’,
‘monthly’, and ‘daily’. Default is ‘annual’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame containing runoff data in a column named ‘runoff’.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Convert streamflow to runoff for a given drainage area.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;streamflow&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">runoff_df</span> <span class="o">=</span> <span class="n">runoff</span><span class="o">.</span><span class="n">streamflow_to_runoff</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;streamflow&#39;</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">runoff_df</span><span class="p">[</span><span class="s1">&#39;runoff&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="go">0    50.0</span>
<span class="go">1    53.6</span>
<span class="go">2    57.2</span>
<span class="go">Name: runoff, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-hyswap.similarity">
<span id="similarity-functions"></span><h2>Similarity Functions<a class="headerlink" href="#module-hyswap.similarity" title="Link to this heading">¶</a></h2>
<p>Similarity measures for hyswap.</p>
<dl class="py function">
<dt class="sig sig-object py" id="hyswap.similarity._name_handling">
<span class="sig-prename descclassname"><span class="pre">hyswap.similarity.</span></span><span class="sig-name descname"><span class="pre">_name_handling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_names</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/similarity.html#_name_handling"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.similarity._name_handling" title="Link to this definition">¶</a></dt>
<dd><p>Private function to handle the names of the dataframes.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.similarity.calculate_correlations">
<span class="sig-prename descclassname"><span class="pre">hyswap.similarity.</span></span><span class="sig-name descname"><span class="pre">calculate_correlations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/similarity.html#calculate_correlations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.similarity.calculate_correlations" title="Link to this definition">¶</a></dt>
<dd><p>Calculate Pearson correlations between dataframes in df_list.</p>
<p>This function is designed to calculate the Pearson correlation
coefficients between dataframes in df_list. The dataframes in df_list are
expected to have the same columns. The correlation coefficients are
calculated using the <cite>numpy.corrcoeff</cite> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_list</strong> (<em>list</em>) – List of dataframes. The dataframes are expected to have the same
columns. Likely inputs are the output of a function like
dataretrieval.nwis.get_dv() or similar</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – Name of the column to use for the correlation calculation.</p></li>
<li><p><strong>df_names</strong> (<em>list</em><em>, </em><em>optional</em>) – List of names for the dataframes in df_list. If provided, the names
will be used to label the rows and columns of the output array. If
not provided, the column “site_no” will be used if available, if it is
not available, the index of the dataframe in the list will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>correlations</strong> (<em>pandas.DataFrame</em>) – Dataframe of correlation coefficients. The rows and columns are
labeled with the names of the dataframes in df_list as provided
by df_names argument.</p></li>
<li><p><strong>n_obs</strong> (<em>int</em>) – Number of observations used to calculate the energy distance.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculate correlations between two synthetic dataframes.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span><span class="p">,</span> <span class="n">n_obs</span> <span class="o">=</span> <span class="n">similarity</span><span class="o">.</span><span class="n">calculate_correlations</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">],</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span>
<span class="go">     0    1</span>
<span class="go">0  1.0 -1.0</span>
<span class="go">1 -1.0  1.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.similarity.calculate_energy_distance">
<span class="sig-prename descclassname"><span class="pre">hyswap.similarity.</span></span><span class="sig-name descname"><span class="pre">calculate_energy_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/similarity.html#calculate_energy_distance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.similarity.calculate_energy_distance" title="Link to this definition">¶</a></dt>
<dd><p>Calculate energy distance between dataframes in df_list.</p>
<p>This function is designed to calculate the energy distance between
dataframes in df_list. The dataframes in df_list are expected to have the
same columns. The energy distance is calculated using the
<cite>scipy.stats.energy_distance</cite> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_list</strong> (<em>list</em>) – List of dataframes. The dataframes are expected to have the same
columns. Likely inputs are the output of a function like
dataretrieval.nwis.get_dv() or similar</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – Name of the column to use for the energy distance calculation.</p></li>
<li><p><strong>df_names</strong> (<em>list</em><em>, </em><em>optional</em>) – List of names for the dataframes in df_list. If provided, the names
will be used to label the rows and columns of the output array. If
not provided, the column “site_no” will be used if available, if it is
not available, the index of the dataframe in the list will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>energy_distances</strong> (<em>pandas.DataFrame</em>) – Dataframe of energy distances. The rows and columns are
labeled with the names of the dataframes in df_list as provided
by df_names argument.</p></li>
<li><p><strong>n_obs</strong> (<em>int</em>) – Number of observations used to calculate the energy distance.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculate energy distances between two synthetic dataframes.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span><span class="p">,</span> <span class="n">n_obs</span> <span class="o">=</span> <span class="n">similarity</span><span class="o">.</span><span class="n">calculate_energy_distance</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">],</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span>
<span class="go">          0         1</span>
<span class="go">0  0.000000  3.376389</span>
<span class="go">1  3.376389  0.000000</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hyswap.similarity.calculate_wasserstein_distance">
<span class="sig-prename descclassname"><span class="pre">hyswap.similarity.</span></span><span class="sig-name descname"><span class="pre">calculate_wasserstein_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hyswap/similarity.html#calculate_wasserstein_distance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hyswap.similarity.calculate_wasserstein_distance" title="Link to this definition">¶</a></dt>
<dd><p>Calculate Wasserstein distance between dataframes in df_list.</p>
<p>This function is designed to calculate the Wasserstein distance between
dataframes in df_list. The dataframes in df_list are expected to have the
same columns. The Wasserstein distance is calculated using the
<cite>scipy.stats.wasserstein_distance</cite> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_list</strong> (<em>list</em>) – List of dataframes. The dataframes are expected to have the same
columns. Likely inputs are the output of a function like
dataretrieval.nwis.get_dv() or similar</p></li>
<li><p><strong>data_column_name</strong> (<em>str</em>) – Name of the column to use for the Wasserstein distance calculation.</p></li>
<li><p><strong>df_names</strong> (<em>list</em><em>, </em><em>optional</em>) – List of names for the dataframes in df_list. If provided, the names
will be used to label the rows and columns of the output array. If
not provided, the column “site_no” will be used if available, if it is
not available, the index of the dataframe in the list will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>wasserstein_distances</strong> (<em>pandas.DataFrame</em>) – Dataframe of Wasserstein distances. The rows and columns are
labeled with the names of the dataframes in df_list as provided
by df_names argument.</p></li>
<li><p><strong>n_obs</strong> (<em>int</em>) – Number of observations used to calculate the energy distance.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Calculate Wasserstein distances between two synthetic dataframes.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span><span class="p">,</span> <span class="n">n_obs</span> <span class="o">=</span> <span class="n">similarity</span><span class="o">.</span><span class="n">calculate_wasserstein_distance</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">],</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span>
<span class="go">     0    1</span>
<span class="go">0  0.0  9.0</span>
<span class="go">1  9.0  0.0</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Module Dependency Graph</a></li>
<li><a class="reference internal" href="#api-reference">API Reference</a><ul>
<li><a class="reference internal" href="#module-hyswap.utils">Utility Functions</a><ul>
<li><a class="reference internal" href="#hyswap.utils.calculate_metadata"><code class="docutils literal notranslate"><span class="pre">calculate_metadata()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.calculate_summary_statistics"><code class="docutils literal notranslate"><span class="pre">calculate_summary_statistics()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.categorize_flows"><code class="docutils literal notranslate"><span class="pre">categorize_flows()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.define_year_doy_columns"><code class="docutils literal notranslate"><span class="pre">define_year_doy_columns()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.filter_approved_data"><code class="docutils literal notranslate"><span class="pre">filter_approved_data()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.filter_data_by_month_day"><code class="docutils literal notranslate"><span class="pre">filter_data_by_month_day()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.filter_data_by_time"><code class="docutils literal notranslate"><span class="pre">filter_data_by_time()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.filter_to_common_time"><code class="docutils literal notranslate"><span class="pre">filter_to_common_time()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.leap_year_adjustment"><code class="docutils literal notranslate"><span class="pre">leap_year_adjustment()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.munge_nwis_stats"><code class="docutils literal notranslate"><span class="pre">munge_nwis_stats()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.retrieve_schema"><code class="docutils literal notranslate"><span class="pre">retrieve_schema()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.rolling_average"><code class="docutils literal notranslate"><span class="pre">rolling_average()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.utils.set_data_type"><code class="docutils literal notranslate"><span class="pre">set_data_type()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-hyswap.exceedance">Exceedance Probability Functions</a><ul>
<li><a class="reference internal" href="#hyswap.exceedance.calculate_exceedance_probability_from_distribution"><code class="docutils literal notranslate"><span class="pre">calculate_exceedance_probability_from_distribution()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.exceedance.calculate_exceedance_probability_from_distribution_multiple"><code class="docutils literal notranslate"><span class="pre">calculate_exceedance_probability_from_distribution_multiple()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.exceedance.calculate_exceedance_probability_from_values"><code class="docutils literal notranslate"><span class="pre">calculate_exceedance_probability_from_values()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.exceedance.calculate_exceedance_probability_from_values_multiple"><code class="docutils literal notranslate"><span class="pre">calculate_exceedance_probability_from_values_multiple()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-hyswap.rasterhydrograph">Raster Hydrograph Functions</a><ul>
<li><a class="reference internal" href="#hyswap.rasterhydrograph._calculate_date_range"><code class="docutils literal notranslate"><span class="pre">_calculate_date_range()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.rasterhydrograph._check_inputs"><code class="docutils literal notranslate"><span class="pre">_check_inputs()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.rasterhydrograph.format_data"><code class="docutils literal notranslate"><span class="pre">format_data()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-hyswap.percentiles">Percentile Calculation Functions</a><ul>
<li><a class="reference internal" href="#hyswap.percentiles.calculate_fixed_percentile_from_value"><code class="docutils literal notranslate"><span class="pre">calculate_fixed_percentile_from_value()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.percentiles.calculate_fixed_percentile_thresholds"><code class="docutils literal notranslate"><span class="pre">calculate_fixed_percentile_thresholds()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.percentiles.calculate_multiple_variable_percentiles_from_values"><code class="docutils literal notranslate"><span class="pre">calculate_multiple_variable_percentiles_from_values()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.percentiles.calculate_variable_percentile_from_value"><code class="docutils literal notranslate"><span class="pre">calculate_variable_percentile_from_value()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.percentiles.calculate_variable_percentile_thresholds_by_day"><code class="docutils literal notranslate"><span class="pre">calculate_variable_percentile_thresholds_by_day()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.percentiles.calculate_variable_percentile_thresholds_by_day_of_year"><code class="docutils literal notranslate"><span class="pre">calculate_variable_percentile_thresholds_by_day_of_year()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-hyswap.cumulative">Cumulative Calculation Functions</a><ul>
<li><a class="reference internal" href="#hyswap.cumulative._tidy_cumulative_dataframe"><code class="docutils literal notranslate"><span class="pre">_tidy_cumulative_dataframe()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.cumulative.calculate_daily_cumulative_values"><code class="docutils literal notranslate"><span class="pre">calculate_daily_cumulative_values()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-hyswap.plots">Plotting Functions</a><ul>
<li><a class="reference internal" href="#hyswap.plots.plot_cumulative_hydrograph"><code class="docutils literal notranslate"><span class="pre">plot_cumulative_hydrograph()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.plots.plot_duration_hydrograph"><code class="docutils literal notranslate"><span class="pre">plot_duration_hydrograph()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.plots.plot_flow_duration_curve"><code class="docutils literal notranslate"><span class="pre">plot_flow_duration_curve()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.plots.plot_hydrograph"><code class="docutils literal notranslate"><span class="pre">plot_hydrograph()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.plots.plot_raster_hydrograph"><code class="docutils literal notranslate"><span class="pre">plot_raster_hydrograph()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.plots.plot_similarity_heatmap"><code class="docutils literal notranslate"><span class="pre">plot_similarity_heatmap()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-hyswap.runoff">Runoff Calculation Functions</a><ul>
<li><a class="reference internal" href="#hyswap.runoff.calculate_geometric_runoff"><code class="docutils literal notranslate"><span class="pre">calculate_geometric_runoff()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.runoff.calculate_multiple_geometric_runoff"><code class="docutils literal notranslate"><span class="pre">calculate_multiple_geometric_runoff()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.runoff.convert_cfs_to_runoff"><code class="docutils literal notranslate"><span class="pre">convert_cfs_to_runoff()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.runoff.identify_sites_from_geom_intersection"><code class="docutils literal notranslate"><span class="pre">identify_sites_from_geom_intersection()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.runoff.streamflow_to_runoff"><code class="docutils literal notranslate"><span class="pre">streamflow_to_runoff()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-hyswap.similarity">Similarity Functions</a><ul>
<li><a class="reference internal" href="#hyswap.similarity._name_handling"><code class="docutils literal notranslate"><span class="pre">_name_handling()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.similarity.calculate_correlations"><code class="docutils literal notranslate"><span class="pre">calculate_correlations()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.similarity.calculate_energy_distance"><code class="docutils literal notranslate"><span class="pre">calculate_energy_distance()</span></code></a></li>
<li><a class="reference internal" href="#hyswap.similarity.calculate_wasserstein_distance"><code class="docutils literal notranslate"><span class="pre">calculate_wasserstein_distance()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../meta/disclaimer.html"
                          title="previous chapter">Disclaimer</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../meta/disclaimer.html" title="Disclaimer"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">hyswap 0.1.dev1+gd165042 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Module Dependency Graph</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright .
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    </div>
  </body>
</html>